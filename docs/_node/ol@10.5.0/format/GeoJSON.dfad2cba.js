var Qe={PROPERTYCHANGE:"propertychange"},ct={CHANGE:"change"};let ts=class{constructor(){this.disposed=!1}dispose(){this.disposed||(this.disposed=!0,this.disposeInternal())}disposeInternal(){}};var es=ts;function ss(n,t,e){let s,i;e=e||Jt;let r=0,o=n.length,a=!1;for(;r<o;)s=r+(o-r>>1),i=+e(n[s],t),i<0?r=s+1:(o=s,a=!i);return a?r:~r}function Jt(n,t){return n>t?1:n<t?-1:0}function M(n,t){const e=Array.isArray(t)?t:[t],s=e.length;for(let i=0;i<s;i++)n[n.length]=e[i]}function ns(n,t){const e=n.length;if(e!==t.length)return!1;for(let s=0;s<e;s++)if(n[s]!==t[s])return!1;return!0}function zt(){}function Qt(n){let t,e,s;return function(){const i=Array.prototype.slice.call(arguments);return(!e||this!==s||!ns(i,e))&&(s=this,e=i,t=n.apply(this,arguments)),t}}function te(n){for(const t in n)delete n[t]}function ee(n){let t;for(t in n)return!1;return!t}let is=class{constructor(t){this.propagationStopped,this.defaultPrevented,this.type=t,this.target=null}preventDefault(){this.defaultPrevented=!0}stopPropagation(){this.propagationStopped=!0}};var se=is;let rs=class extends es{constructor(t){super(),this.eventTarget_=t,this.pendingRemovals_=null,this.dispatching_=null,this.listeners_=null}addEventListener(t,e){if(!t||!e)return;const s=this.listeners_||(this.listeners_={}),i=s[t]||(s[t]=[]);i.includes(e)||i.push(e)}dispatchEvent(t){const e=typeof t=="string",s=e?t:t.type,i=this.listeners_&&this.listeners_[s];if(!i)return;const r=e?new se(t):t;r.target||(r.target=this.eventTarget_||this);const o=this.dispatching_||(this.dispatching_={}),a=this.pendingRemovals_||(this.pendingRemovals_={});s in o||(o[s]=0,a[s]=0),++o[s];let l;for(let h=0,u=i.length;h<u;++h)if("handleEvent"in i[h]?l=i[h].handleEvent(r):l=i[h].call(this,r),l===!1||r.propagationStopped){l=!1;break}if(--o[s]===0){let h=a[s];for(delete a[s];h--;)this.removeEventListener(s,zt);delete o[s]}return l}disposeInternal(){this.listeners_&&te(this.listeners_)}getListeners(t){return this.listeners_&&this.listeners_[t]||void 0}hasListener(t){return this.listeners_?t?t in this.listeners_:Object.keys(this.listeners_).length>0:!1}removeEventListener(t,e){if(!this.listeners_)return;const s=this.listeners_[t];if(!s)return;const i=s.indexOf(e);i!==-1&&(this.pendingRemovals_&&t in this.pendingRemovals_?(s[i]=zt,++this.pendingRemovals_[t]):(s.splice(i,1),s.length===0&&delete this.listeners_[t]))}};var os=rs;function D(n,t,e,s,i){if(i){const o=e;e=function(a){return n.removeEventListener(t,e),o.call(s??this,a)}}else s&&s!==n&&(e=e.bind(s));const r={target:n,type:t,listener:e};return n.addEventListener(t,e),r}function ne(n,t,e,s){return D(n,t,e,s,!0)}function W(n){n&&n.target&&(n.target.removeEventListener(n.type,n.listener),te(n))}let K=class extends os{constructor(){super(),this.on=this.onInternal,this.once=this.onceInternal,this.un=this.unInternal,this.revision_=0}changed(){++this.revision_,this.dispatchEvent(ct.CHANGE)}getRevision(){return this.revision_}onInternal(t,e){if(Array.isArray(t)){const s=t.length,i=new Array(s);for(let r=0;r<s;++r)i[r]=D(this,t[r],e);return i}return D(this,t,e)}onceInternal(t,e){let s;if(Array.isArray(t)){const i=t.length;s=new Array(i);for(let r=0;r<i;++r)s[r]=ne(this,t[r],e)}else s=ne(this,t,e);return e.ol_key=s,s}unInternal(t,e){const s=e.ol_key;if(s)as(s);else if(Array.isArray(t))for(let i=0,r=t.length;i<r;++i)this.removeEventListener(t[i],e);else this.removeEventListener(t,e)}};K.prototype.on,K.prototype.once,K.prototype.un;function as(n){if(Array.isArray(n))for(let t=0,e=n.length;t<e;++t)W(n[t]);else W(n)}var ls=K;function m(){throw new Error("Unimplemented abstract method.")}let hs=0;function us(n){return n.ol_uid||(n.ol_uid=String(++hs))}let ie=class extends se{constructor(t,e,s){super(t),this.key=e,this.oldValue=s}},ds=class extends ls{constructor(t){super(),this.on,this.once,this.un,us(this),this.values_=null,t!==void 0&&this.setProperties(t)}get(t){let e;return this.values_&&this.values_.hasOwnProperty(t)&&(e=this.values_[t]),e}getKeys(){return this.values_&&Object.keys(this.values_)||[]}getProperties(){return this.values_&&Object.assign({},this.values_)||{}}getPropertiesInternal(){return this.values_}hasProperties(){return!!this.values_}notify(t,e){let s;s=`change:${t}`,this.hasListener(s)&&this.dispatchEvent(new ie(s,t,e)),s=Qe.PROPERTYCHANGE,this.hasListener(s)&&this.dispatchEvent(new ie(s,t,e))}addChangeListener(t,e){this.addEventListener(`change:${t}`,e)}removeChangeListener(t,e){this.removeEventListener(`change:${t}`,e)}set(t,e,s){const i=this.values_||(this.values_={});if(s)i[t]=e;else{const r=i[t];i[t]=e,r!==e&&this.notify(t,r)}}setProperties(t,e){for(const s in t)this.set(s,t[s],e)}applyProperties(t){t.values_&&Object.assign(this.values_||(this.values_={}),t.values_)}unset(t,e){if(this.values_&&t in this.values_){const s=this.values_[t];delete this.values_[t],ee(this.values_)&&(this.values_=null),e||this.notify(t,s)}}};var re=ds;function fs(n,t){if(!n)throw new Error(t)}let cs=class Ze extends re{constructor(t){if(super(),this.on,this.once,this.un,this.id_=void 0,this.geometryName_="geometry",this.style_=null,this.styleFunction_=void 0,this.geometryChangeKey_=null,this.addChangeListener(this.geometryName_,this.handleGeometryChanged_),t)if(typeof t.getSimplifiedGeometry=="function"){const e=t;this.setGeometry(e)}else{const e=t;this.setProperties(e)}}clone(){const t=new Ze(this.hasProperties()?this.getProperties():null);t.setGeometryName(this.getGeometryName());const e=this.getGeometry();e&&t.setGeometry(e.clone());const s=this.getStyle();return s&&t.setStyle(s),t}getGeometry(){return this.get(this.geometryName_)}getId(){return this.id_}getGeometryName(){return this.geometryName_}getStyle(){return this.style_}getStyleFunction(){return this.styleFunction_}handleGeometryChange_(){this.changed()}handleGeometryChanged_(){this.geometryChangeKey_&&(W(this.geometryChangeKey_),this.geometryChangeKey_=null);const t=this.getGeometry();t&&(this.geometryChangeKey_=D(t,ct.CHANGE,this.handleGeometryChange_,this)),this.changed()}setGeometry(t){this.set(this.geometryName_,t)}setStyle(t){this.style_=t,this.styleFunction_=t?gs(t):void 0,this.changed()}setId(t){this.id_=t,this.changed()}setGeometryName(t){this.removeChangeListener(this.geometryName_,this.handleGeometryChanged_),this.geometryName_=t,this.addChangeListener(this.geometryName_,this.handleGeometryChanged_),this.handleGeometryChanged_()}};function gs(n){if(typeof n=="function")return n;let t;return Array.isArray(n)?t=n:(fs(typeof n.getZIndex=="function","Expected an `ol/style/Style` or an array of `ol/style/Style.js`"),t=[n]),function(){return t}}var oe=cs,v={UNKNOWN:0,INTERSECTING:1,ABOVE:2,RIGHT:4,BELOW:8,LEFT:16};function w(n,t,e){let s,i;return t<n[0]?s=n[0]-t:n[2]<t?s=t-n[2]:s=0,e<n[1]?i=n[1]-e:n[3]<e?i=e-n[3]:i=0,s*s+i*i}function ae(n,t,e){return n[0]<=t&&t<=n[2]&&n[1]<=e&&e<=n[3]}function le(n,t){const e=n[0],s=n[1],i=n[2],r=n[3],o=t[0],a=t[1];let l=v.UNKNOWN;return o<e?l=l|v.LEFT:o>i&&(l=l|v.RIGHT),a<s?l=l|v.BELOW:a>r&&(l=l|v.ABOVE),l===v.UNKNOWN&&(l=v.INTERSECTING),l}function gt(){return[1/0,1/0,-1/0,-1/0]}function he(n,t,e,s,i){return i?(i[0]=n,i[1]=t,i[2]=e,i[3]=s,i):[n,t,e,s]}function pt(n){return he(1/0,1/0,-1/0,-1/0,n)}function ue(n,t){const e=n[0],s=n[1];return he(e,s,e,s,t)}function yt(n,t,e,s,i){const r=pt(i);return de(r,n,t,e,s)}function ps(n,t){return t[0]<n[0]&&(n[0]=t[0]),t[2]>n[2]&&(n[2]=t[2]),t[1]<n[1]&&(n[1]=t[1]),t[3]>n[3]&&(n[3]=t[3]),n}function de(n,t,e,s,i){for(;e<s;e+=i)ys(n,t[e],t[e+1]);return n}function ys(n,t,e){n[0]=Math.min(n[0],t),n[1]=Math.min(n[1],e),n[2]=Math.max(n[2],t),n[3]=Math.max(n[3],e)}function _s(n,t){let e;return e=t(ms(n)),e||(e=t(Cs(n)),e)||(e=t(Ps(n)),e)||(e=t(vs(n)),e)?e:!1}function ms(n){return[n[0],n[1]]}function Cs(n){return[n[2],n[1]]}function H(n){return[(n[0]+n[2])/2,(n[1]+n[3])/2]}function B(n){return n[3]-n[1]}function vs(n){return[n[0],n[3]]}function Ps(n){return[n[2],n[3]]}function $s(n,t){return n[0]<=t[2]&&n[2]>=t[0]&&n[1]<=t[3]&&n[3]>=t[1]}function xs(n,t){return t?(t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t):n}function Ms(n,t,e){let s=!1;const i=le(n,t),r=le(n,e);if(i===v.INTERSECTING||r===v.INTERSECTING)s=!0;else{const o=n[0],a=n[1],l=n[2],h=n[3],u=t[0],d=t[1],f=e[0],c=e[1],g=(c-d)/(f-u);let p,y;r&v.ABOVE&&!(i&v.ABOVE)&&(p=f-(c-h)/g,s=p>=o&&p<=l),!s&&r&v.RIGHT&&!(i&v.RIGHT)&&(y=c-(f-l)*g,s=y>=a&&y<=h),!s&&r&v.BELOW&&!(i&v.BELOW)&&(p=f-(c-a)/g,s=p>=o&&p<=l),!s&&r&v.LEFT&&!(i&v.LEFT)&&(y=c-(f-o)*g,s=y>=a&&y<=h)}return s}function Es(n,t,e,s,i,r){const o=i-e,a=r-s;if(o!==0||a!==0){const l=((n-e)*o+(t-s)*a)/(o*o+a*a);l>1?(e=i,s=r):l>0&&(e+=o*l,s+=a*l)}return F(n,t,e,s)}function F(n,t,e,s){const i=e-n,r=s-t;return i*i+r*r}function fe(n){return n*180/Math.PI}function Z(n){return n*Math.PI/180}function _t(n,t,e){return n+e*(t-n)}function mt(n,t,e){if(n>=t&&n<e)return n;const s=e-t;return((n-t)%s+s)%s+t}const Gs={radians:6370997/(2*Math.PI),degrees:2*Math.PI*6370997/360,ft:.3048,m:1,"us-ft":1200/3937};let ws=class{constructor(t){this.code_=t.code,this.units_=t.units,this.extent_=t.extent!==void 0?t.extent:null,this.worldExtent_=t.worldExtent!==void 0?t.worldExtent:null,this.axisOrientation_=t.axisOrientation!==void 0?t.axisOrientation:"enu",this.global_=t.global!==void 0?t.global:!1,this.canWrapX_=!!(this.global_&&this.extent_),this.getPointResolutionFunc_=t.getPointResolution,this.defaultTileGrid_=null,this.metersPerUnit_=t.metersPerUnit}canWrapX(){return this.canWrapX_}getCode(){return this.code_}getExtent(){return this.extent_}getUnits(){return this.units_}getMetersPerUnit(){return this.metersPerUnit_||Gs[this.units_]}getWorldExtent(){return this.worldExtent_}getAxisOrientation(){return this.axisOrientation_}isGlobal(){return this.global_}setGlobal(t){this.global_=t,this.canWrapX_=!!(t&&this.extent_)}getDefaultTileGrid(){return this.defaultTileGrid_}setDefaultTileGrid(t){this.defaultTileGrid_=t}setExtent(t){this.extent_=t,this.canWrapX_=!!(this.global_&&t)}setWorldExtent(t){this.worldExtent_=t}setGetPointResolution(t){this.getPointResolutionFunc_=t}getPointResolutionFunc(){return this.getPointResolutionFunc_}};var Ct=ws;const q=6378137,N=Math.PI*q,Fs=[-N,-N,N,N],Rs=[-180,-85,180,85],V=q*Math.log(Math.tan(Math.PI/2));let T=class extends Ct{constructor(t){super({code:t,units:"m",extent:Fs,global:!0,worldExtent:Rs,getPointResolution:function(e,s){return e/Math.cosh(s[1]/q)}})}};const ce=[new T("EPSG:3857"),new T("EPSG:102100"),new T("EPSG:102113"),new T("EPSG:900913"),new T("http://www.opengis.net/def/crs/EPSG/0/3857"),new T("http://www.opengis.net/gml/srs/epsg.xml#3857")];function Ss(n,t,e,s){const i=n.length;e=e>1?e:2,s=s??e,t===void 0&&(e>2?t=n.slice():t=new Array(i));for(let r=0;r<i;r+=s){t[r]=N*n[r]/180;let o=q*Math.log(Math.tan(Math.PI*(+n[r+1]+90)/360));o>V?o=V:o<-V&&(o=-V),t[r+1]=o}return t}function Is(n,t,e,s){const i=n.length;e=e>1?e:2,s=s??e,t===void 0&&(e>2?t=n.slice():t=new Array(i));for(let r=0;r<i;r+=s)t[r]=180*n[r]/N,t[r+1]=360*Math.atan(Math.exp(n[r+1]/q))/Math.PI-90;return t}const Os=6378137,ge=[-180,-90,180,90],bs=Math.PI*Os/180;let R=class extends Ct{constructor(t,e){super({code:t,units:"degrees",extent:ge,axisOrientation:e,global:!0,metersPerUnit:bs,worldExtent:ge})}};const pe=[new R("CRS:84"),new R("EPSG:4326","neu"),new R("urn:ogc:def:crs:OGC:1.3:CRS84"),new R("urn:ogc:def:crs:OGC:2:84"),new R("http://www.opengis.net/def/crs/OGC/1.3/CRS84"),new R("http://www.opengis.net/gml/srs/epsg.xml#4326","neu"),new R("http://www.opengis.net/def/crs/EPSG/0/4326","neu")];let vt={};function Ns(n){return vt[n]||vt[n.replace(/urn:(x-)?ogc:def:crs:EPSG:(.*:)?(\w+)$/,"EPSG:$3")]||null}function Ts(n,t){vt[n]=t}let L={};function k(n,t,e){const s=n.getCode(),i=t.getCode();s in L||(L[s]={}),L[s][i]=e}function Pt(n,t){return n in L&&t in L[n]?L[n][t]:null}const J=.9996,P=.00669438,z=P*P,Q=z*P,S=P/(1-P),ye=Math.sqrt(1-P),A=(1-ye)/(1+ye),_e=A*A,$t=_e*A,xt=$t*A,me=xt*A,Ce=1-P/4-3*z/64-5*Q/256,Ls=3*P/8+3*z/32+45*Q/1024,As=15*z/256+45*Q/1024,js=35*Q/3072,Xs=3/2*A-27/32*$t+269/512*me,Ys=21/16*_e-55/32*xt,Ds=151/96*$t-417/128*me,qs=1097/512*xt,tt=6378137;function ks(n,t,e){const s=n-5e5,i=(e.north?t:t-1e7)/J/(tt*Ce),r=i+Xs*Math.sin(2*i)+Ys*Math.sin(4*i)+Ds*Math.sin(6*i)+qs*Math.sin(8*i),o=Math.sin(r),a=o*o,l=Math.cos(r),h=o/l,u=h*h,d=u*u,f=1-P*a,c=Math.sqrt(1-P*a),g=tt/c,p=(1-P)/f,y=S*l**2,C=y*y,_=s/(g*J),E=_*_,x=E*_,G=x*_,Y=G*_,Je=Y*_,ze=r-h/p*(E/2-G/24*(5+3*u+10*y-4*C-9*S))+Je/720*(61+90*u+298*y+45*d-252*S-3*C);let ft=(_-x/6*(1+2*u+y)+Y/120*(5-2*y+28*u-3*C+8*S+24*d))/l;return ft=mt(ft+Z($e(e.number)),-Math.PI,Math.PI),[fe(ft),fe(ze)]}const ve=-80,Pe=84,Us=-180,Ws=180;function Ks(n,t,e){n=mt(n,Us,Ws),t<ve?t=ve:t>Pe&&(t=Pe);const s=Z(t),i=Math.sin(s),r=Math.cos(s),o=i/r,a=o*o,l=a*a,h=Z(n),u=$e(e.number),d=Z(u),f=tt/Math.sqrt(1-P*i**2),c=S*r**2,g=r*mt(h-d,-Math.PI,Math.PI),p=g*g,y=p*g,C=y*g,_=C*g,E=_*g,x=tt*(Ce*s-Ls*Math.sin(2*s)+As*Math.sin(4*s)-js*Math.sin(6*s)),G=J*f*(g+y/6*(1-a+c)+_/120*(5-18*a+l+72*c-58*S))+5e5;let Y=J*(x+f*o*(p/2+C/24*(5-a+9*c+4*c**2)+E/720*(61-58*a+l+600*c-330*S)));return e.north||(Y+=1e7),[G,Y]}function $e(n){return(n-1)*6-180+3}const Hs=[/^EPSG:(\d+)$/,/^urn:ogc:def:crs:EPSG::(\d+)$/,/^http:\/\/www\.opengis\.net\/def\/crs\/EPSG\/0\/(\d+)$/];function xe(n){let t=0;for(const i of Hs){const r=n.match(i);if(r){t=parseInt(r[1]);break}}if(!t)return null;let e=0,s=!1;return t>32700&&t<32761?e=t-32700:t>32600&&t<32661&&(s=!0,e=t-32600),e?{number:e,north:s}:null}function Me(n,t){return function(e,s,i,r){const o=e.length;i=i>1?i:2,r=r??i,s||(i>2?s=e.slice():s=new Array(o));for(let a=0;a<o;a+=r){const l=e[a],h=e[a+1],u=n(l,h,t);s[a]=u[0],s[a+1]=u[1]}return s}}function Bs(n){return xe(n)?new Ct({code:n,units:"m"}):null}function Zs(n){const t=xe(n.getCode());return t?{forward:Me(Ks,t),inverse:Me(ks,t)}:null}const Vs=[Zs],Js=[Bs];function Mt(n,t){if(t!==void 0){for(let e=0,s=n.length;e<s;++e)t[e]=n[e];t=t}else t=n.slice();return t}function Et(n){Ts(n.getCode(),n),k(n,n,Mt)}function zs(n){n.forEach(Et)}function $(n){if(typeof n!="string")return n;const t=Ns(n);if(t)return t;for(const e of Js){const s=e(n);if(s)return s}return null}function Ee(n){zs(n),n.forEach(function(t){n.forEach(function(e){t!==e&&k(t,e,Mt)})})}function Qs(n,t,e,s){n.forEach(function(i){t.forEach(function(r){k(i,r,e),k(r,i,s)})})}function tn(n,t){if(n===t)return!0;const e=n.getUnits()===t.getUnits();return(n.getCode()===t.getCode()||Ge(n,t)===Mt)&&e}function Ge(n,t){const e=n.getCode(),s=t.getCode();let i=Pt(e,s);if(i)return i;let r=null,o=null;for(const l of Vs)r||(r=l(n)),o||(o=l(t));if(!r&&!o)return null;const a="EPSG:4326";if(o)if(r)i=Gt(r.inverse,o.forward);else{const l=Pt(e,a);l&&(i=Gt(l,o.forward))}else{const l=Pt(a,s);l&&(i=Gt(r.inverse,l))}return i&&(Et(n),Et(t),k(n,t,i)),i}function Gt(n,t){return function(e,s,i,r){return s=n(e,s,i,r),t(s,s,i,r)}}function wt(n,t){const e=$(n),s=$(t);return Ge(e,s)}function en(){Ee(ce),Ee(pe),Qs(pe,ce,Ss,Is)}en(),new Array(6);function we(){return[1,0,0,1,0,0]}function Fe(n,t,e,s,i,r,o,a){const l=Math.sin(r),h=Math.cos(r);return n[0]=s*h,n[1]=i*l,n[2]=-s*l,n[3]=i*h,n[4]=o*s*h-a*s*l+t,n[5]=o*i*l+a*i*h+e,n}function Re(n,t,e,s,i,r,o){r=r||[],o=o||2;let a=0;for(let l=t;l<e;l+=s){const h=n[l],u=n[l+1];r[a++]=i[0]*h+i[2]*u+i[4],r[a++]=i[1]*h+i[3]*u+i[5];for(let d=2;d<o;d++)r[a++]=n[l+d]}return r&&r.length!=a&&(r.length=a),r}function sn(n,t,e,s,i,r,o){o=o||[];const a=Math.cos(i),l=Math.sin(i),h=r[0],u=r[1];let d=0;for(let f=t;f<e;f+=s){const c=n[f]-h,g=n[f+1]-u;o[d++]=h+c*a-g*l,o[d++]=u+c*l+g*a;for(let p=f+2;p<f+s;++p)o[d++]=n[p]}return o&&o.length!=d&&(o.length=d),o}function nn(n,t,e,s,i,r,o,a){a=a||[];const l=o[0],h=o[1];let u=0;for(let d=t;d<e;d+=s){const f=n[d]-l,c=n[d+1]-h;a[u++]=l+i*f,a[u++]=h+r*c;for(let g=d+2;g<d+s;++g)a[u++]=n[g]}return a&&a.length!=u&&(a.length=u),a}function rn(n,t,e,s,i,r,o){o=o||[];let a=0;for(let l=t;l<e;l+=s){o[a++]=n[l]+i,o[a++]=n[l+1]+r;for(let h=l+2;h<l+s;++h)o[a++]=n[h]}return o&&o.length!=a&&(o.length=a),o}const Se=we(),on=[NaN,NaN];let an=class extends re{constructor(){super(),this.extent_=gt(),this.extentRevision_=-1,this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=0,this.simplifyTransformedInternal=Qt((t,e,s)=>{if(!s)return this.getSimplifiedGeometry(e);const i=this.clone();return i.applyTransform(s),i.getSimplifiedGeometry(e)})}simplifyTransformed(t,e){return this.simplifyTransformedInternal(this.getRevision(),t,e)}clone(){return m()}closestPointXY(t,e,s,i){return m()}containsXY(t,e){return this.closestPointXY(t,e,on,Number.MIN_VALUE)===0}getClosestPoint(t,e){return e=e||[NaN,NaN],this.closestPointXY(t[0],t[1],e,1/0),e}intersectsCoordinate(t){return this.containsXY(t[0],t[1])}computeExtent(t){return m()}getExtent(t){if(this.extentRevision_!=this.getRevision()){const e=this.computeExtent(this.extent_);(isNaN(e[0])||isNaN(e[1]))&&pt(e),this.extentRevision_=this.getRevision()}return xs(this.extent_,t)}rotate(t,e){m()}scale(t,e,s){m()}simplify(t){return this.getSimplifiedGeometry(t*t)}getSimplifiedGeometry(t){return m()}getType(){return m()}applyTransform(t){m()}intersectsExtent(t){return m()}translate(t,e){m()}transform(t,e){const s=$(t),i=s.getUnits()=="tile-pixels"?function(r,o,a){const l=s.getExtent(),h=s.getWorldExtent(),u=B(h)/B(l);Fe(Se,h[0],h[3],u,-u,0,0,0);const d=Re(r,0,r.length,a,Se,o),f=wt(s,e);return f?f(d,d,a):d}:wt(s,e);return this.applyTransform(i),this}};var Ie=an;let ln=class extends Ie{constructor(){super(),this.layout="XY",this.stride=2,this.flatCoordinates}computeExtent(t){return yt(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t)}getCoordinates(){return m()}getFirstCoordinate(){return this.flatCoordinates.slice(0,this.stride)}getFlatCoordinates(){return this.flatCoordinates}getLastCoordinate(){return this.flatCoordinates.slice(this.flatCoordinates.length-this.stride)}getLayout(){return this.layout}getSimplifiedGeometry(t){if(this.simplifiedGeometryRevision!==this.getRevision()&&(this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=this.getRevision()),t<0||this.simplifiedGeometryMaxMinSquaredTolerance!==0&&t<=this.simplifiedGeometryMaxMinSquaredTolerance)return this;const e=this.getSimplifiedGeometryInternal(t);return e.getFlatCoordinates().length<this.flatCoordinates.length?e:(this.simplifiedGeometryMaxMinSquaredTolerance=t,this)}getSimplifiedGeometryInternal(t){return this}getStride(){return this.stride}setFlatCoordinates(t,e){this.stride=Oe(t),this.layout=t,this.flatCoordinates=e}setCoordinates(t,e){m()}setLayout(t,e,s){let i;if(t)i=Oe(t);else{for(let r=0;r<s;++r){if(e.length===0){this.layout="XY",this.stride=2;return}e=e[0]}i=e.length,t=I(i)}this.layout=t,this.stride=i}applyTransform(t){this.flatCoordinates&&(t(this.flatCoordinates,this.flatCoordinates,this.layout.startsWith("XYZ")?3:2,this.stride),this.changed())}rotate(t,e){const s=this.getFlatCoordinates();if(s){const i=this.getStride();sn(s,0,s.length,i,t,e,s),this.changed()}}scale(t,e,s){e===void 0&&(e=t),s||(s=H(this.getExtent()));const i=this.getFlatCoordinates();if(i){const r=this.getStride();nn(i,0,i.length,r,t,e,s,i),this.changed()}}translate(t,e){const s=this.getFlatCoordinates();if(s){const i=this.getStride();rn(s,0,s.length,i,t,e,s),this.changed()}}};function I(n){let t;return n==2?t="XY":n==3?t="XYZ":n==4&&(t="XYZM"),t}function Oe(n){let t;return n=="XY"?t=2:n=="XYZ"||n=="XYM"?t=3:n=="XYZM"&&(t=4),t}var O=ln;function hn(n,t,e,s){for(let i=0,r=e.length;i<r;++i)n[t++]=e[i];return t}function et(n,t,e,s){for(let i=0,r=e.length;i<r;++i){const o=e[i];for(let a=0;a<s;++a)n[t++]=o[a]}return t}function U(n,t,e,s,i){i=i||[];let r=0;for(let o=0,a=e.length;o<a;++o){const l=et(n,t,e[o],s);i[r++]=l,t=l}return i.length=r,i}function be(n,t,e,s,i){i=i||[];let r=0;for(let o=0,a=e.length;o<a;++o){const l=U(n,t,e[o],s,i[r]);l.length===0&&(l[0]=t),i[r++]=l,t=l[l.length-1]}return i.length=r,i}function Ne(n,t,e,s){const i=[];let r=gt();for(let o=0,a=e.length;o<a;++o){const l=e[o];r=yt(n,t,l[0],s),i.push((r[0]+r[2])/2,(r[1]+r[3])/2),t=l[l.length-1]}return i}function un(n,t,e,s,i){return!_s(i,function(r){return!b(n,t,e,s,r[0],r[1])})}function b(n,t,e,s,i,r){let o=0,a=n[e-s],l=n[e-s+1];for(;t<e;t+=s){const h=n[t],u=n[t+1];l<=r?u>r&&(h-a)*(r-l)-(i-a)*(u-l)>0&&o++:u<=r&&(h-a)*(r-l)-(i-a)*(u-l)<0&&o--,a=h,l=u}return o!==0}function Ft(n,t,e,s,i,r){if(e.length===0||!b(n,t,e[0],s,i,r))return!1;for(let o=1,a=e.length;o<a;++o)if(b(n,e[o-1],e[o],s,i,r))return!1;return!0}function dn(n,t,e,s,i,r){if(e.length===0)return!1;for(let o=0,a=e.length;o<a;++o){const l=e[o];if(Ft(n,t,l,s,i,r))return!0;t=l[l.length-1]}return!1}function Rt(n,t,e,s,i,r,o){let a,l,h,u,d,f,c;const g=i[r+1],p=[];for(let _=0,E=e.length;_<E;++_){const x=e[_];for(u=n[x-s],f=n[x-s+1],a=t;a<x;a+=s)d=n[a],c=n[a+1],(g<=f&&c<=g||f<=g&&g<=c)&&(h=(g-f)/(c-f)*(d-u)+u,p.push(h)),u=d,f=c}let y=NaN,C=-1/0;for(p.sort(Jt),u=p[0],a=1,l=p.length;a<l;++a){d=p[a];const _=Math.abs(d-u);_>C&&(h=(u+d)/2,Ft(n,t,e,s,h,g)&&(y=h,C=_)),u=d}return isNaN(y)&&(y=i[r]),o?(o.push(y,g,C),o):[y,g,C]}function Te(n,t,e,s,i){let r=[];for(let o=0,a=e.length;o<a;++o){const l=e[o];r=Rt(n,t,l,s,i,2*o,r),t=l[l.length-1]}return r}function st(n,t,e,s,i,r,o){let a,l;const h=(e-t)/s;if(h===1)a=t;else if(h===2)a=t,l=i;else if(h!==0){let u=n[t],d=n[t+1],f=0;const c=[0];for(let y=t+s;y<e;y+=s){const C=n[y],_=n[y+1];f+=Math.sqrt((C-u)*(C-u)+(_-d)*(_-d)),c.push(f),u=C,d=_}const g=i*f,p=ss(c,g);p<0?(l=(g-c[-p-2])/(c[-p-1]-c[-p-2]),a=t+(-p-2)*s):a=t+p*s}o=o>1?o:2,r=r||new Array(o);for(let u=0;u<o;++u)r[u]=a===void 0?NaN:l===void 0?n[a+u]:_t(n[a+u],n[a+s+u],l);return r}function St(n,t,e,s,i,r){if(e==t)return null;let o;if(i<n[t+s-1])return r?(o=n.slice(t,t+s),o[s-1]=i,o):null;if(n[e-1]<i)return r?(o=n.slice(e-s,e),o[s-1]=i,o):null;if(i==n[t+s-1])return n.slice(t,t+s);let a=t/s,l=e/s;for(;a<l;){const f=a+l>>1;i<n[(f+1)*s-1]?l=f:a=f+1}const h=n[a*s-1];if(i==h)return n.slice((a-1)*s,(a-1)*s+s);const u=n[(a+1)*s-1],d=(i-h)/(u-h);o=[];for(let f=0;f<s-1;++f)o.push(_t(n[(a-1)*s+f],n[a*s+f],d));return o.push(i),o}function fn(n,t,e,s,i,r,o){if(o)return St(n,t,e[e.length-1],s,i,r);let a;if(i<n[s-1])return r?(a=n.slice(0,s),a[s-1]=i,a):null;if(n[n.length-1]<i)return r?(a=n.slice(n.length-s),a[s-1]=i,a):null;for(let l=0,h=e.length;l<h;++l){const u=e[l];if(t!=u){if(i<n[t+s-1])return null;if(i<=n[u-1])return St(n,t,u,s,i,!1);t=u}}return null}function cn(n,t,e,s){for(;t<e-s;){for(let i=0;i<s;++i){const r=n[t+i];n[t+i]=n[e-s+i],n[e-s+i]=r}t+=s,e-=s}}function It(n,t,e,s){let i=0,r=n[e-s],o=n[e-s+1];for(;t<e;t+=s){const a=n[t],l=n[t+1];i+=(a-r)*(l+o),r=a,o=l}return i===0?void 0:i>0}function Ot(n,t,e,s,i){i=i!==void 0?i:!1;for(let r=0,o=e.length;r<o;++r){const a=e[r],l=It(n,t,a,s);if(r===0){if(i&&l||!i&&!l)return!1}else if(i&&!l||!i&&l)return!1;t=a}return!0}function Le(n,t,e,s,i){for(let r=0,o=e.length;r<o;++r){const a=e[r];if(!Ot(n,t,a,s,i))return!1;a.length&&(t=a[a.length-1])}return!0}function nt(n,t,e,s,i){i=i!==void 0?i:!1;for(let r=0,o=e.length;r<o;++r){const a=e[r],l=It(n,t,a,s);(r===0?i&&l||!i&&!l:i&&!l||!i&&l)&&cn(n,t,a,s),t=a}return t}function bt(n,t,e,s,i){for(let r=0,o=e.length;r<o;++r)t=nt(n,t,e[r],s,i);return t}function gn(n,t){const e=[];let s=0,i=0,r;for(let o=0,a=t.length;o<a;++o){const l=t[o],h=It(n,s,l,2);if(r===void 0&&(r=h),h===r)e.push(t.slice(i,o+1));else{if(e.length===0)continue;e[e.length-1].push(t[i])}i=o+1,s=l}return e}function it(n,t,e,s,i,r,o){const a=(e-t)/s;if(a<3){for(;t<e;t+=s)r[o++]=n[t],r[o++]=n[t+1];return o}const l=new Array(a);l[0]=1,l[a-1]=1;const h=[t,e-s];let u=0;for(;h.length>0;){const d=h.pop(),f=h.pop();let c=0;const g=n[f],p=n[f+1],y=n[d],C=n[d+1];for(let _=f+s;_<d;_+=s){const E=n[_],x=n[_+1],G=Es(E,x,g,p,y,C);G>c&&(u=_,c=G)}c>i&&(l[(u-t)/s]=1,f+s<u&&h.push(f,u),u+s<d&&h.push(u,d))}for(let d=0;d<a;++d)l[d]&&(r[o++]=n[t+d*s],r[o++]=n[t+d*s+1]);return o}function Ae(n,t,e,s,i,r,o,a){for(let l=0,h=e.length;l<h;++l){const u=e[l];o=it(n,t,u,s,i,r,o),a.push(o),t=u}return o}function j(n,t){return t*Math.round(n/t)}function pn(n,t,e,s,i,r,o){if(t==e)return o;let a=j(n[t],i),l=j(n[t+1],i);t+=s,r[o++]=a,r[o++]=l;let h,u;do if(h=j(n[t],i),u=j(n[t+1],i),t+=s,t==e)return r[o++]=h,r[o++]=u,o;while(h==a&&u==l);for(;t<e;){const d=j(n[t],i),f=j(n[t+1],i);if(t+=s,d==h&&f==u)continue;const c=h-a,g=u-l,p=d-a,y=f-l;if(c*y==g*p&&(c<0&&p<c||c==p||c>0&&p>c)&&(g<0&&y<g||g==y||g>0&&y>g)){h=d,u=f;continue}r[o++]=h,r[o++]=u,a=h,l=u,h=d,u=f}return r[o++]=h,r[o++]=u,o}function Nt(n,t,e,s,i,r,o,a){for(let l=0,h=e.length;l<h;++l){const u=e[l];o=pn(n,t,u,s,i,r,o),a.push(o),t=u}return o}function yn(n,t,e,s,i,r,o,a){for(let l=0,h=e.length;l<h;++l){const u=e[l],d=[];o=Nt(n,t,u,s,i,r,o,d),a.push(d),t=u[u.length-1]}return o}class ht extends Ie{constructor(t){super(),this.geometries_=t,this.changeEventsKeys_=[],this.listenGeometriesChange_()}unlistenGeometriesChange_(){this.changeEventsKeys_.forEach(W),this.changeEventsKeys_.length=0}listenGeometriesChange_(){const t=this.geometries_;for(let e=0,s=t.length;e<s;++e)this.changeEventsKeys_.push(D(t[e],ct.CHANGE,this.changed,this))}clone(){const t=new ht(Tt(this.geometries_));return t.applyProperties(this),t}closestPointXY(t,e,s,i){if(i<w(this.getExtent(),t,e))return i;const r=this.geometries_;for(let o=0,a=r.length;o<a;++o)i=r[o].closestPointXY(t,e,s,i);return i}containsXY(t,e){const s=this.geometries_;for(let i=0,r=s.length;i<r;++i)if(s[i].containsXY(t,e))return!0;return!1}computeExtent(t){pt(t);const e=this.geometries_;for(let s=0,i=e.length;s<i;++s)ps(t,e[s].getExtent());return t}getGeometries(){return Tt(this.geometries_)}getGeometriesArray(){return this.geometries_}getGeometriesArrayRecursive(){let t=[];const e=this.geometries_;for(let s=0,i=e.length;s<i;++s)e[s].getType()===this.getType()?t=t.concat(e[s].getGeometriesArrayRecursive()):t.push(e[s]);return t}getSimplifiedGeometry(t){if(this.simplifiedGeometryRevision!==this.getRevision()&&(this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=this.getRevision()),t<0||this.simplifiedGeometryMaxMinSquaredTolerance!==0&&t<this.simplifiedGeometryMaxMinSquaredTolerance)return this;const e=[],s=this.geometries_;let i=!1;for(let r=0,o=s.length;r<o;++r){const a=s[r],l=a.getSimplifiedGeometry(t);e.push(l),l!==a&&(i=!0)}return i?new ht(e):(this.simplifiedGeometryMaxMinSquaredTolerance=t,this)}getType(){return"GeometryCollection"}intersectsExtent(t){const e=this.geometries_;for(let s=0,i=e.length;s<i;++s)if(e[s].intersectsExtent(t))return!0;return!1}isEmpty(){return this.geometries_.length===0}rotate(t,e){const s=this.geometries_;for(let i=0,r=s.length;i<r;++i)s[i].rotate(t,e);this.changed()}scale(t,e,s){s||(s=H(this.getExtent()));const i=this.geometries_;for(let r=0,o=i.length;r<o;++r)i[r].scale(t,e,s);this.changed()}setGeometries(t){this.setGeometriesArray(Tt(t))}setGeometriesArray(t){this.unlistenGeometriesChange_(),this.geometries_=t,this.listenGeometriesChange_(),this.changed()}applyTransform(t){const e=this.geometries_;for(let s=0,i=e.length;s<i;++s)e[s].applyTransform(t);this.changed()}translate(t,e){const s=this.geometries_;for(let i=0,r=s.length;i<r;++i)s[i].translate(t,e);this.changed()}disposeInternal(){this.unlistenGeometriesChange_(),super.disposeInternal()}}function Tt(n){return n.map(t=>t.clone())}var _n=ht;function je(n,t,e,s){let i=0;const r=n[e-s],o=n[e-s+1];let a=0,l=0;for(;t<e;t+=s){const h=n[t]-r,u=n[t+1]-o;i+=l*h-a*u,a=h,l=u}return i/2}function Xe(n,t,e,s){let i=0;for(let r=0,o=e.length;r<o;++r){const a=e[r];i+=je(n,t,a,s),t=a}return i}function mn(n,t,e,s){let i=0;for(let r=0,o=e.length;r<o;++r){const a=e[r];i+=Xe(n,t,a,s),t=a[a.length-1]}return i}function Ye(n,t,e,s,i,r,o){const a=n[t],l=n[t+1],h=n[e]-a,u=n[e+1]-l;let d;if(h===0&&u===0)d=t;else{const f=((i-a)*h+(r-l)*u)/(h*h+u*u);if(f>1)d=e;else if(f>0){for(let c=0;c<s;++c)o[c]=_t(n[t+c],n[e+c],f);o.length=s;return}else d=t}for(let f=0;f<s;++f)o[f]=n[d+f];o.length=s}function Lt(n,t,e,s,i){let r=n[t],o=n[t+1];for(t+=s;t<e;t+=s){const a=n[t],l=n[t+1],h=F(r,o,a,l);h>i&&(i=h),r=a,o=l}return i}function At(n,t,e,s,i){for(let r=0,o=e.length;r<o;++r){const a=e[r];i=Lt(n,t,a,s,i),t=a}return i}function Cn(n,t,e,s,i){for(let r=0,o=e.length;r<o;++r){const a=e[r];i=At(n,t,a,s,i),t=a[a.length-1]}return i}function jt(n,t,e,s,i,r,o,a,l,h,u){if(t==e)return h;let d,f;if(i===0){if(f=F(o,a,n[t],n[t+1]),f<h){for(d=0;d<s;++d)l[d]=n[t+d];return l.length=s,f}return h}u=u||[NaN,NaN];let c=t+s;for(;c<e;)if(Ye(n,c-s,c,s,o,a,u),f=F(o,a,u[0],u[1]),f<h){for(h=f,d=0;d<s;++d)l[d]=u[d];l.length=s,c+=s}else c+=s*Math.max((Math.sqrt(f)-Math.sqrt(h))/i|0,1);if(r&&(Ye(n,e-s,t,s,o,a,u),f=F(o,a,u[0],u[1]),f<h)){for(h=f,d=0;d<s;++d)l[d]=u[d];l.length=s}return h}function Xt(n,t,e,s,i,r,o,a,l,h,u){u=u||[NaN,NaN];for(let d=0,f=e.length;d<f;++d){const c=e[d];h=jt(n,t,c,s,i,r,o,a,l,h,u),t=c}return h}function vn(n,t,e,s,i,r,o,a,l,h,u){u=u||[NaN,NaN];for(let d=0,f=e.length;d<f;++d){const c=e[d];h=Xt(n,t,c,s,i,r,o,a,l,h,u),t=c[c.length-1]}return h}function rt(n,t,e,s,i){i=i!==void 0?i:[];let r=0;for(let o=t;o<e;o+=s)i[r++]=n.slice(o,o+s);return i.length=r,i}function Yt(n,t,e,s,i){i=i!==void 0?i:[];let r=0;for(let o=0,a=e.length;o<a;++o){const l=e[o];i[r++]=rt(n,t,l,s,i[r]),t=l}return i.length=r,i}function Pn(n,t,e,s,i){i=i!==void 0?i:[];let r=0;for(let o=0,a=e.length;o<a;++o){const l=e[o];i[r++]=l.length===1&&l[0]===t?[]:Yt(n,t,l,s,i[r]),t=l[l.length-1]}return i.length=r,i}let $n=class Ht extends O{constructor(t,e){super(),this.maxDelta_=-1,this.maxDeltaRevision_=-1,e!==void 0&&!Array.isArray(t[0])?this.setFlatCoordinates(e,t):this.setCoordinates(t,e)}clone(){return new Ht(this.flatCoordinates.slice(),this.layout)}closestPointXY(t,e,s,i){return i<w(this.getExtent(),t,e)?i:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(Lt(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),jt(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,this.maxDelta_,!0,t,e,s,i))}getArea(){return je(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getCoordinates(){return rt(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getSimplifiedGeometryInternal(t){const e=[];return e.length=it(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t,e,0),new Ht(e,"XY")}getType(){return"LinearRing"}intersectsExtent(t){return!1}setCoordinates(t,e){this.setLayout(e,t,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=et(this.flatCoordinates,0,t,this.stride),this.changed()}};var De=$n;function qe(n,t,e,s,i){let r;for(t+=s;t<e;t+=s)if(r=i(n.slice(t-s,t),n.slice(t,t+s)),r)return r;return!1}function ot(n,t,e,s,i,r){return r=r??de(gt(),n,t,e,s),$s(i,r)?r[0]>=i[0]&&r[2]<=i[2]||r[1]>=i[1]&&r[3]<=i[3]?!0:qe(n,t,e,s,function(o,a){return Ms(i,o,a)}):!1}function xn(n,t,e,s,i){for(let r=0,o=e.length;r<o;++r){if(ot(n,t,e[r],s,i))return!0;t=e[r]}return!1}function Mn(n,t,e,s,i){return!!(ot(n,t,e,s,i)||b(n,t,e,s,i[0],i[1])||b(n,t,e,s,i[0],i[3])||b(n,t,e,s,i[2],i[1])||b(n,t,e,s,i[2],i[3]))}function ke(n,t,e,s,i){if(!Mn(n,t,e[0],s,i))return!1;if(e.length===1)return!0;for(let r=1,o=e.length;r<o;++r)if(un(n,e[r-1],e[r],s,i)&&!ot(n,e[r-1],e[r],s,i))return!1;return!0}function En(n,t,e,s,i){for(let r=0,o=e.length;r<o;++r){const a=e[r];if(ke(n,t,a,s,i))return!0;t=a[a.length-1]}return!1}function Ue(n,t,e,s){let i=n[t],r=n[t+1],o=0;for(let a=t+s;a<e;a+=s){const l=n[a],h=n[a+1];o+=Math.sqrt((l-i)*(l-i)+(h-r)*(h-r)),i=l,r=h}return o}class ut extends O{constructor(t,e){super(),this.flatMidpoint_=null,this.flatMidpointRevision_=-1,this.maxDelta_=-1,this.maxDeltaRevision_=-1,e!==void 0&&!Array.isArray(t[0])?this.setFlatCoordinates(e,t):this.setCoordinates(t,e)}appendCoordinate(t){M(this.flatCoordinates,t),this.changed()}clone(){const t=new ut(this.flatCoordinates.slice(),this.layout);return t.applyProperties(this),t}closestPointXY(t,e,s,i){return i<w(this.getExtent(),t,e)?i:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(Lt(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),jt(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,this.maxDelta_,!1,t,e,s,i))}forEachSegment(t){return qe(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t)}getCoordinateAtM(t,e){return this.layout!="XYM"&&this.layout!="XYZM"?null:(e=e!==void 0?e:!1,St(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t,e))}getCoordinates(){return rt(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getCoordinateAt(t,e){return st(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t,e,this.stride)}getLength(){return Ue(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getFlatMidpoint(){return this.flatMidpointRevision_!=this.getRevision()&&(this.flatMidpoint_=this.getCoordinateAt(.5,this.flatMidpoint_??void 0),this.flatMidpointRevision_=this.getRevision()),this.flatMidpoint_}getSimplifiedGeometryInternal(t){const e=[];return e.length=it(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t,e,0),new ut(e,"XY")}getType(){return"LineString"}intersectsExtent(t){return ot(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t,this.getExtent())}setCoordinates(t,e){this.setLayout(e,t,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=et(this.flatCoordinates,0,t,this.stride),this.changed()}}var Dt=ut;let Gn=class Bt extends O{constructor(t,e,s){if(super(),this.ends_=[],this.maxDelta_=-1,this.maxDeltaRevision_=-1,Array.isArray(t[0]))this.setCoordinates(t,e);else if(e!==void 0&&s)this.setFlatCoordinates(e,t),this.ends_=s;else{const i=t,r=[],o=[];for(let l=0,h=i.length;l<h;++l){const u=i[l];M(r,u.getFlatCoordinates()),o.push(r.length)}const a=i.length===0?this.getLayout():i[0].getLayout();this.setFlatCoordinates(a,r),this.ends_=o}}appendLineString(t){M(this.flatCoordinates,t.getFlatCoordinates().slice()),this.ends_.push(this.flatCoordinates.length),this.changed()}clone(){const t=new Bt(this.flatCoordinates.slice(),this.layout,this.ends_.slice());return t.applyProperties(this),t}closestPointXY(t,e,s,i){return i<w(this.getExtent(),t,e)?i:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(At(this.flatCoordinates,0,this.ends_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),Xt(this.flatCoordinates,0,this.ends_,this.stride,this.maxDelta_,!1,t,e,s,i))}getCoordinateAtM(t,e,s){return this.layout!="XYM"&&this.layout!="XYZM"||this.flatCoordinates.length===0?null:(e=e!==void 0?e:!1,s=s!==void 0?s:!1,fn(this.flatCoordinates,0,this.ends_,this.stride,t,e,s))}getCoordinates(){return Yt(this.flatCoordinates,0,this.ends_,this.stride)}getEnds(){return this.ends_}getLineString(t){return t<0||this.ends_.length<=t?null:new Dt(this.flatCoordinates.slice(t===0?0:this.ends_[t-1],this.ends_[t]),this.layout)}getLineStrings(){const t=this.flatCoordinates,e=this.ends_,s=this.layout,i=[];let r=0;for(let o=0,a=e.length;o<a;++o){const l=e[o],h=new Dt(t.slice(r,l),s);i.push(h),r=l}return i}getLength(){const t=this.ends_;let e=0,s=0;for(let i=0,r=t.length;i<r;++i)s+=Ue(this.flatCoordinates,e,t[i],this.stride),e=t[i];return s}getFlatMidpoints(){const t=[],e=this.flatCoordinates;let s=0;const i=this.ends_,r=this.stride;for(let o=0,a=i.length;o<a;++o){const l=i[o],h=st(e,s,l,r,.5);M(t,h),s=l}return t}getSimplifiedGeometryInternal(t){const e=[],s=[];return e.length=Ae(this.flatCoordinates,0,this.ends_,this.stride,t,e,0,s),new Bt(e,"XY",s)}getType(){return"MultiLineString"}intersectsExtent(t){return xn(this.flatCoordinates,0,this.ends_,this.stride,t)}setCoordinates(t,e){this.setLayout(e,t,2),this.flatCoordinates||(this.flatCoordinates=[]);const s=U(this.flatCoordinates,0,t,this.stride,this.ends_);this.flatCoordinates.length=s.length===0?0:s[s.length-1],this.changed()}};var wn=Gn;class Vt extends O{constructor(t,e){super(),this.setCoordinates(t,e)}clone(){const t=new Vt(this.flatCoordinates.slice(),this.layout);return t.applyProperties(this),t}closestPointXY(t,e,s,i){const r=this.flatCoordinates,o=F(t,e,r[0],r[1]);if(o<i){const a=this.stride;for(let l=0;l<a;++l)s[l]=r[l];return s.length=a,o}return i}getCoordinates(){return this.flatCoordinates.slice()}computeExtent(t){return ue(this.flatCoordinates,t)}getType(){return"Point"}intersectsExtent(t){return ae(t,this.flatCoordinates[0],this.flatCoordinates[1])}setCoordinates(t,e){this.setLayout(e,t,0),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=hn(this.flatCoordinates,0,t,this.stride),this.changed()}}var at=Vt;let Fn=class Ve extends O{constructor(t,e){super(),e&&!Array.isArray(t[0])?this.setFlatCoordinates(e,t):this.setCoordinates(t,e)}appendPoint(t){M(this.flatCoordinates,t.getFlatCoordinates()),this.changed()}clone(){const t=new Ve(this.flatCoordinates.slice(),this.layout);return t.applyProperties(this),t}closestPointXY(t,e,s,i){if(i<w(this.getExtent(),t,e))return i;const r=this.flatCoordinates,o=this.stride;for(let a=0,l=r.length;a<l;a+=o){const h=F(t,e,r[a],r[a+1]);if(h<i){i=h;for(let u=0;u<o;++u)s[u]=r[a+u];s.length=o}}return i}getCoordinates(){return rt(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getPoint(t){const e=this.flatCoordinates.length/this.stride;return t<0||e<=t?null:new at(this.flatCoordinates.slice(t*this.stride,(t+1)*this.stride),this.layout)}getPoints(){const t=this.flatCoordinates,e=this.layout,s=this.stride,i=[];for(let r=0,o=t.length;r<o;r+=s){const a=new at(t.slice(r,r+s),e);i.push(a)}return i}getType(){return"MultiPoint"}intersectsExtent(t){const e=this.flatCoordinates,s=this.stride;for(let i=0,r=e.length;i<r;i+=s){const o=e[i],a=e[i+1];if(ae(t,o,a))return!0}return!1}setCoordinates(t,e){this.setLayout(e,t,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=et(this.flatCoordinates,0,t,this.stride),this.changed()}};var We=Fn;let Rn=class Zt extends O{constructor(t,e,s){super(),this.ends_=[],this.flatInteriorPointRevision_=-1,this.flatInteriorPoint_=null,this.maxDelta_=-1,this.maxDeltaRevision_=-1,this.orientedRevision_=-1,this.orientedFlatCoordinates_=null,e!==void 0&&s?(this.setFlatCoordinates(e,t),this.ends_=s):this.setCoordinates(t,e)}appendLinearRing(t){this.flatCoordinates?M(this.flatCoordinates,t.getFlatCoordinates()):this.flatCoordinates=t.getFlatCoordinates().slice(),this.ends_.push(this.flatCoordinates.length),this.changed()}clone(){const t=new Zt(this.flatCoordinates.slice(),this.layout,this.ends_.slice());return t.applyProperties(this),t}closestPointXY(t,e,s,i){return i<w(this.getExtent(),t,e)?i:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(At(this.flatCoordinates,0,this.ends_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),Xt(this.flatCoordinates,0,this.ends_,this.stride,this.maxDelta_,!0,t,e,s,i))}containsXY(t,e){return Ft(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,t,e)}getArea(){return Xe(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride)}getCoordinates(t){let e;return t!==void 0?(e=this.getOrientedFlatCoordinates().slice(),nt(e,0,this.ends_,this.stride,t)):e=this.flatCoordinates,Yt(e,0,this.ends_,this.stride)}getEnds(){return this.ends_}getFlatInteriorPoint(){if(this.flatInteriorPointRevision_!=this.getRevision()){const t=H(this.getExtent());this.flatInteriorPoint_=Rt(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,t,0),this.flatInteriorPointRevision_=this.getRevision()}return this.flatInteriorPoint_}getInteriorPoint(){return new at(this.getFlatInteriorPoint(),"XYM")}getLinearRingCount(){return this.ends_.length}getLinearRing(t){return t<0||this.ends_.length<=t?null:new De(this.flatCoordinates.slice(t===0?0:this.ends_[t-1],this.ends_[t]),this.layout)}getLinearRings(){const t=this.layout,e=this.flatCoordinates,s=this.ends_,i=[];let r=0;for(let o=0,a=s.length;o<a;++o){const l=s[o],h=new De(e.slice(r,l),t);i.push(h),r=l}return i}getOrientedFlatCoordinates(){if(this.orientedRevision_!=this.getRevision()){const t=this.flatCoordinates;Ot(t,0,this.ends_,this.stride)?this.orientedFlatCoordinates_=t:(this.orientedFlatCoordinates_=t.slice(),this.orientedFlatCoordinates_.length=nt(this.orientedFlatCoordinates_,0,this.ends_,this.stride)),this.orientedRevision_=this.getRevision()}return this.orientedFlatCoordinates_}getSimplifiedGeometryInternal(t){const e=[],s=[];return e.length=Nt(this.flatCoordinates,0,this.ends_,this.stride,Math.sqrt(t),e,0,s),new Zt(e,"XY",s)}getType(){return"Polygon"}intersectsExtent(t){return ke(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,t)}setCoordinates(t,e){this.setLayout(e,t,2),this.flatCoordinates||(this.flatCoordinates=[]);const s=U(this.flatCoordinates,0,t,this.stride,this.ends_);this.flatCoordinates.length=s.length===0?0:s[s.length-1],this.changed()}};var qt=Rn;class dt extends O{constructor(t,e,s){if(super(),this.endss_=[],this.flatInteriorPointsRevision_=-1,this.flatInteriorPoints_=null,this.maxDelta_=-1,this.maxDeltaRevision_=-1,this.orientedRevision_=-1,this.orientedFlatCoordinates_=null,!s&&!Array.isArray(t[0])){const i=t,r=[],o=[];for(let a=0,l=i.length;a<l;++a){const h=i[a],u=r.length,d=h.getEnds();for(let f=0,c=d.length;f<c;++f)d[f]+=u;M(r,h.getFlatCoordinates()),o.push(d)}e=i.length===0?this.getLayout():i[0].getLayout(),t=r,s=o}e!==void 0&&s?(this.setFlatCoordinates(e,t),this.endss_=s):this.setCoordinates(t,e)}appendPolygon(t){let e;if(!this.flatCoordinates)this.flatCoordinates=t.getFlatCoordinates().slice(),e=t.getEnds().slice(),this.endss_.push();else{const s=this.flatCoordinates.length;M(this.flatCoordinates,t.getFlatCoordinates()),e=t.getEnds().slice();for(let i=0,r=e.length;i<r;++i)e[i]+=s}this.endss_.push(e),this.changed()}clone(){const t=this.endss_.length,e=new Array(t);for(let i=0;i<t;++i)e[i]=this.endss_[i].slice();const s=new dt(this.flatCoordinates.slice(),this.layout,e);return s.applyProperties(this),s}closestPointXY(t,e,s,i){return i<w(this.getExtent(),t,e)?i:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(Cn(this.flatCoordinates,0,this.endss_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),vn(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,this.maxDelta_,!0,t,e,s,i))}containsXY(t,e){return dn(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,t,e)}getArea(){return mn(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride)}getCoordinates(t){let e;return t!==void 0?(e=this.getOrientedFlatCoordinates().slice(),bt(e,0,this.endss_,this.stride,t)):e=this.flatCoordinates,Pn(e,0,this.endss_,this.stride)}getEndss(){return this.endss_}getFlatInteriorPoints(){if(this.flatInteriorPointsRevision_!=this.getRevision()){const t=Ne(this.flatCoordinates,0,this.endss_,this.stride);this.flatInteriorPoints_=Te(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,t),this.flatInteriorPointsRevision_=this.getRevision()}return this.flatInteriorPoints_}getInteriorPoints(){return new We(this.getFlatInteriorPoints().slice(),"XYM")}getOrientedFlatCoordinates(){if(this.orientedRevision_!=this.getRevision()){const t=this.flatCoordinates;Le(t,0,this.endss_,this.stride)?this.orientedFlatCoordinates_=t:(this.orientedFlatCoordinates_=t.slice(),this.orientedFlatCoordinates_.length=bt(this.orientedFlatCoordinates_,0,this.endss_,this.stride)),this.orientedRevision_=this.getRevision()}return this.orientedFlatCoordinates_}getSimplifiedGeometryInternal(t){const e=[],s=[];return e.length=yn(this.flatCoordinates,0,this.endss_,this.stride,Math.sqrt(t),e,0,s),new dt(e,"XY",s)}getPolygon(t){if(t<0||this.endss_.length<=t)return null;let e;if(t===0)e=0;else{const r=this.endss_[t-1];e=r[r.length-1]}const s=this.endss_[t].slice(),i=s[s.length-1];if(e!==0)for(let r=0,o=s.length;r<o;++r)s[r]-=e;return new qt(this.flatCoordinates.slice(e,i),this.layout,s)}getPolygons(){const t=this.layout,e=this.flatCoordinates,s=this.endss_,i=[];let r=0;for(let o=0,a=s.length;o<a;++o){const l=s[o].slice(),h=l[l.length-1];if(r!==0)for(let d=0,f=l.length;d<f;++d)l[d]-=r;const u=new qt(e.slice(r,h),t,l);i.push(u),r=h}return i}getType(){return"MultiPolygon"}intersectsExtent(t){return En(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,t)}setCoordinates(t,e){this.setLayout(e,t,3),this.flatCoordinates||(this.flatCoordinates=[]);const s=be(this.flatCoordinates,0,t,this.stride,this.endss_);if(s.length===0)this.flatCoordinates.length=0;else{const i=s[s.length-1];this.flatCoordinates.length=i.length===0?0:i[i.length-1]}this.changed()}}var Sn=dt;const Ke=we();class X{constructor(t,e,s,i,r,o){this.styleFunction,this.extent_,this.id_=o,this.type_=t,this.flatCoordinates_=e,this.flatInteriorPoints_=null,this.flatMidpoints_=null,this.ends_=s||null,this.properties_=r,this.squaredTolerance_,this.stride_=i,this.simplifiedGeometry_}get(t){return this.properties_[t]}getExtent(){return this.extent_||(this.extent_=this.type_==="Point"?ue(this.flatCoordinates_):yt(this.flatCoordinates_,0,this.flatCoordinates_.length,2)),this.extent_}getFlatInteriorPoint(){if(!this.flatInteriorPoints_){const t=H(this.getExtent());this.flatInteriorPoints_=Rt(this.flatCoordinates_,0,this.ends_,2,t,0)}return this.flatInteriorPoints_}getFlatInteriorPoints(){if(!this.flatInteriorPoints_){const t=gn(this.flatCoordinates_,this.ends_),e=Ne(this.flatCoordinates_,0,t,2);this.flatInteriorPoints_=Te(this.flatCoordinates_,0,t,2,e)}return this.flatInteriorPoints_}getFlatMidpoint(){return this.flatMidpoints_||(this.flatMidpoints_=st(this.flatCoordinates_,0,this.flatCoordinates_.length,2,.5)),this.flatMidpoints_}getFlatMidpoints(){if(!this.flatMidpoints_){this.flatMidpoints_=[];const t=this.flatCoordinates_;let e=0;const s=this.ends_;for(let i=0,r=s.length;i<r;++i){const o=s[i],a=st(t,e,o,2,.5);M(this.flatMidpoints_,a),e=o}}return this.flatMidpoints_}getId(){return this.id_}getOrientedFlatCoordinates(){return this.flatCoordinates_}getGeometry(){return this}getSimplifiedGeometry(t){return this}simplifyTransformed(t,e){return this}getProperties(){return this.properties_}getPropertiesInternal(){return this.properties_}getStride(){return this.stride_}getStyleFunction(){return this.styleFunction}getType(){return this.type_}transform(t){t=$(t);const e=t.getExtent(),s=t.getWorldExtent();if(e&&s){const i=B(s)/B(e);Fe(Ke,s[0],s[3],i,-i,0,0,0),Re(this.flatCoordinates_,0,this.flatCoordinates_.length,2,Ke,this.flatCoordinates_)}}applyTransform(t){t(this.flatCoordinates_,this.flatCoordinates_,this.stride_)}clone(){return new X(this.type_,this.flatCoordinates_.slice(),this.ends_?.slice(),this.stride_,Object.assign({},this.properties_),this.id_)}getEnds(){return this.ends_}enableSimplifyTransformed(){return this.simplifyTransformed=Qt((t,e)=>{if(t===this.squaredTolerance_)return this.simplifiedGeometry_;this.simplifiedGeometry_=this.clone(),e&&this.simplifiedGeometry_.applyTransform(e);const s=this.simplifiedGeometry_.getFlatCoordinates();let i;switch(this.type_){case"LineString":s.length=it(s,0,this.simplifiedGeometry_.flatCoordinates_.length,this.simplifiedGeometry_.stride_,t,s,0),i=[s.length];break;case"MultiLineString":i=[],s.length=Ae(s,0,this.simplifiedGeometry_.ends_,this.simplifiedGeometry_.stride_,t,s,0,i);break;case"Polygon":i=[],s.length=Nt(s,0,this.simplifiedGeometry_.ends_,this.simplifiedGeometry_.stride_,Math.sqrt(t),s,0,i);break}return i&&(this.simplifiedGeometry_=new X(this.type_,s,i,2,this.properties_,this.id_)),this.squaredTolerance_=t,this.simplifiedGeometry_}),this}}X.prototype.getFlatCoordinates=X.prototype.getOrientedFlatCoordinates;var He=X;let In=class{constructor(){this.dataProjection=void 0,this.defaultFeatureProjection=void 0,this.featureClass=oe,this.supportedMediaTypes=null}getReadOptions(t,e){if(e){let s=e.dataProjection?$(e.dataProjection):this.readProjection(t);e.extent&&s&&s.getUnits()==="tile-pixels"&&(s=$(s),s.setWorldExtent(e.extent)),e={dataProjection:s,featureProjection:e.featureProjection}}return this.adaptOptions(e)}adaptOptions(t){return Object.assign({dataProjection:this.dataProjection,featureProjection:this.defaultFeatureProjection,featureClass:this.featureClass},t)}getType(){return m()}readFeature(t,e){return m()}readFeatures(t,e){return m()}readGeometry(t,e){return m()}readProjection(t){return m()}writeFeature(t,e){return m()}writeFeatures(t,e){return m()}writeGeometry(t,e){return m()}};var On=In;function kt(n,t,e){const s=e?$(e.featureProjection):null,i=e?$(e.dataProjection):null;let r=n;if(s&&i&&!tn(s,i)){t&&(r=n.clone());const o=t?s:i,a=t?i:s;o.getUnits()==="tile-pixels"?r.transform(o,a):r.applyTransform(wt(o,a))}if(t&&e&&e.decimals!==void 0){const o=Math.pow(10,e.decimals),a=function(l){for(let h=0,u=l.length;h<u;++h)l[h]=Math.round(l[h]*o)/o;return l};r===n&&(r=n.clone()),r.applyTransform(a)}return r}const bn={Point:at,LineString:Dt,Polygon:qt,MultiPoint:We,MultiLineString:wn,MultiPolygon:Sn};function Nn(n,t,e){return Array.isArray(t[0])?(Le(n,0,t,e)||(n=n.slice(),bt(n,0,t,e)),n):(Ot(n,0,t,e)||(n=n.slice(),nt(n,0,t,e)),n)}function Be(n,t){const e=n.geometry;if(!e)return[];if(Array.isArray(e))return e.map(r=>Be({...n,geometry:r})).flat();const s=e.type==="MultiPolygon"?"Polygon":e.type;if(s==="GeometryCollection"||s==="Circle")throw new Error("Unsupported geometry type: "+s);const i=e.layout.length;return kt(new He(s,s==="Polygon"?Nn(e.flatCoordinates,e.ends,i):e.flatCoordinates,e.ends?.flat(),i,n.properties||{},n.id).enableSimplifyTransformed(),!1,t)}function Ut(n,t){if(!n)return null;if(Array.isArray(n)){const s=n.map(i=>Ut(i,t));return new _n(s)}const e=bn[n.type];return kt(new e(n.flatCoordinates,n.layout||"XY",n.ends),!1,t)}class Tn extends On{constructor(){super()}getType(){return"json"}readFeature(t,e){return this.readFeatureFromObject(lt(t),this.getReadOptions(t,e))}readFeatures(t,e){return this.readFeaturesFromObject(lt(t),this.getReadOptions(t,e))}readFeatureFromObject(t,e){return m()}readFeaturesFromObject(t,e){return m()}readGeometry(t,e){return this.readGeometryFromObject(lt(t),this.getReadOptions(t,e))}readGeometryFromObject(t,e){return m()}readProjection(t){return this.readProjectionFromObject(lt(t))}readProjectionFromObject(t){return m()}writeFeature(t,e){return JSON.stringify(this.writeFeatureObject(t,e))}writeFeatureObject(t,e){return m()}writeFeatures(t,e){return JSON.stringify(this.writeFeaturesObject(t,e))}writeFeaturesObject(t,e){return m()}writeGeometry(t,e){return JSON.stringify(this.writeGeometryObject(t,e))}writeGeometryObject(t,e){return m()}}function lt(n){return typeof n=="string"?JSON.parse(n)||null:n!==null?n:null}var Ln=Tn;class An extends Ln{constructor(t){t=t||{},super(),this.dataProjection=$(t.dataProjection?t.dataProjection:"EPSG:4326"),t.featureProjection&&(this.defaultFeatureProjection=$(t.featureProjection)),t.featureClass&&(this.featureClass=t.featureClass),this.geometryName_=t.geometryName,this.extractGeometryName_=t.extractGeometryName,this.supportedMediaTypes=["application/geo+json","application/vnd.geo+json"]}readFeatureFromObject(t,e){let s=null;t.type==="Feature"?s=t:s={type:"Feature",geometry:t,properties:null};const i=Wt(s.geometry);if(this.featureClass===He)return Be({geometry:i,id:s.id,properties:s.properties},e);const r=new oe;return this.geometryName_?r.setGeometryName(this.geometryName_):this.extractGeometryName_&&s.geometry_name&&r.setGeometryName(s.geometry_name),r.setGeometry(Ut(i,e)),"id"in s&&r.setId(s.id),s.properties&&r.setProperties(s.properties,!0),r}readFeaturesFromObject(t,e){const s=t;let i=null;if(s.type==="FeatureCollection"){const r=t;i=[];const o=r.features;for(let a=0,l=o.length;a<l;++a){const h=this.readFeatureFromObject(o[a],e);h&&i.push(h)}}else i=[this.readFeatureFromObject(t,e)];return i.flat()}readGeometryFromObject(t,e){return jn(t,e)}readProjectionFromObject(t){const e=t.crs;let s;if(e)if(e.type=="name")s=$(e.properties.name);else if(e.type==="EPSG")s=$("EPSG:"+e.properties.code);else throw new Error("Unknown SRS type");else s=this.dataProjection;return s}writeFeatureObject(t,e){e=this.adaptOptions(e);const s={type:"Feature",geometry:null,properties:null},i=t.getId();if(i!==void 0&&(s.id=i),!t.hasProperties())return s;const r=t.getProperties(),o=t.getGeometry();return o&&(s.geometry=Kt(o,e),delete r[t.getGeometryName()]),ee(r)||(s.properties=r),s}writeFeaturesObject(t,e){e=this.adaptOptions(e);const s=[];for(let i=0,r=t.length;i<r;++i)s.push(this.writeFeatureObject(t[i],e));return{type:"FeatureCollection",features:s}}writeGeometryObject(t,e){return Kt(t,this.adaptOptions(e))}}function Wt(n,t){if(!n)return null;let e;switch(n.type){case"Point":{e=Yn(n);break}case"LineString":{e=Dn(n);break}case"Polygon":{e=Wn(n);break}case"MultiPoint":{e=kn(n);break}case"MultiLineString":{e=qn(n);break}case"MultiPolygon":{e=Un(n);break}case"GeometryCollection":{e=Xn(n);break}default:throw new Error("Unsupported GeoJSON type: "+n.type)}return e}function jn(n,t){const e=Wt(n);return Ut(e,t)}function Xn(n,t){return n.geometries.map(function(e){return Wt(e)})}function Yn(n){const t=n.coordinates;return{type:"Point",flatCoordinates:t,layout:I(t.length)}}function Dn(n){const t=n.coordinates,e=t.flat();return{type:"LineString",flatCoordinates:e,ends:[e.length],layout:I(t[0]?.length||2)}}function qn(n){const t=n.coordinates,e=t[0]?.[0]?.length||2,s=[],i=U(s,0,t,e);return{type:"MultiLineString",flatCoordinates:s,ends:i,layout:I(e)}}function kn(n){const t=n.coordinates;return{type:"MultiPoint",flatCoordinates:t.flat(),layout:I(t[0]?.length||2)}}function Un(n){const t=n.coordinates,e=[],s=t[0]?.[0]?.[0].length||2,i=be(e,0,t,s);return{type:"MultiPolygon",flatCoordinates:e,ends:i,layout:I(s)}}function Wn(n){const t=n.coordinates,e=[],s=t[0]?.[0]?.length,i=U(e,0,t,s);return{type:"Polygon",flatCoordinates:e,ends:i,layout:I(s)}}function Kt(n,t){n=kt(n,!0,t);const e=n.getType();let s;switch(e){case"Point":{s=Jn(n);break}case"LineString":{s=Hn(n);break}case"Polygon":{s=zn(n,t);break}case"MultiPoint":{s=Zn(n);break}case"MultiLineString":{s=Bn(n);break}case"MultiPolygon":{s=Vn(n,t);break}case"GeometryCollection":{s=Kn(n,t);break}case"Circle":{s={type:"GeometryCollection",geometries:[]};break}default:throw new Error("Unsupported geometry type: "+e)}return s}function Kn(n,t){return t=Object.assign({},t),delete t.featureProjection,{type:"GeometryCollection",geometries:n.getGeometriesArray().map(function(e){return Kt(e,t)})}}function Hn(n,t){return{type:"LineString",coordinates:n.getCoordinates()}}function Bn(n,t){return{type:"MultiLineString",coordinates:n.getCoordinates()}}function Zn(n,t){return{type:"MultiPoint",coordinates:n.getCoordinates()}}function Vn(n,t){let e;return t&&(e=t.rightHanded),{type:"MultiPolygon",coordinates:n.getCoordinates(e)}}function Jn(n,t){return{type:"Point",coordinates:n.getCoordinates()}}function zn(n,t){let e;return t&&(e=t.rightHanded),{type:"Polygon",coordinates:n.getCoordinates(e)}}var Qn=An;export{Qn as default};
