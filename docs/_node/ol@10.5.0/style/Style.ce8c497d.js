function dt(i,t){if(!i)throw new Error(t)}var h={IDLE:0,LOADING:1,LOADED:2,ERROR:3};const m=typeof navigator<"u"&&typeof navigator.userAgent<"u"?navigator.userAgent.toLowerCase():"",_t=m.includes("safari")&&!m.includes("chrom");_t&&(m.includes("version/15.4")||/cpu (os|iphone os) 15_4 like mac os x/.test(m)),m.includes("webkit")&&m.includes("edge"),m.includes("macintosh");const ft=typeof WorkerGlobalScope<"u"&&typeof OffscreenCanvas<"u"&&self instanceof WorkerGlobalScope,mt=typeof Image<"u"&&Image.prototype.decode;(function(){let i=!1;try{const t=Object.defineProperty({},"passive",{get:function(){i=!0}});window.addEventListener("_",null,t),window.removeEventListener("_",null,t)}catch{}return i})();function _(i,t,e,s){let n;return ft?n=new OffscreenCanvas(i||300,t||300):n=document.createElement("canvas"),i&&(n.width=i),t&&(n.height=t),n.getContext("2d",s)}let A;function J(){return A||(A=_(1,1)),A}function I(i,t,e){return Math.min(Math.max(i,t),e)}function vt(i,t){const e=Math.pow(10,t);return Math.round(i*e)/e}const pt=[NaN,NaN,NaN,0];let $;function yt(){return $||($=_(1,1,void 0,{willReadFrequently:!0,desynchronized:!0})),$}const Dt=/^rgba?\(\s*(\d+%?)\s+(\d+%?)\s+(\d+%?)(?:\s*\/\s*(\d+%|\d*\.\d+|[01]))?\s*\)$/i,It=/^rgba?\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)(?:\s*,\s*(\d+%|\d*\.\d+|[01]))?\s*\)$/i,wt=/^rgba?\(\s*(\d+%)\s*,\s*(\d+%)\s*,\s*(\d+%)(?:\s*,\s*(\d+%|\d*\.\d+|[01]))?\s*\)$/i,Lt=/^#([\da-f]{3,4}|[\da-f]{6}|[\da-f]{8})$/i;function w(i,t){return i.endsWith("%")?Number(i.substring(0,i.length-1))/t:Number(i)}function p(i){throw new Error('failed to parse "'+i+'" as color')}function j(i){if(i.toLowerCase().startsWith("rgb")){const r=i.match(It)||i.match(Dt)||i.match(wt);if(r){const a=r[4],o=100/255;return[I(w(r[1],o)+.5|0,0,255),I(w(r[2],o)+.5|0,0,255),I(w(r[3],o)+.5|0,0,255),a!==void 0?I(w(a,100),0,1):1]}p(i)}if(i.startsWith("#")){if(Lt.test(i)){const r=i.substring(1),a=r.length<=4?1:2,o=[0,0,0,255];for(let l=0,c=r.length;l<c;l+=a){let u=parseInt(r.substring(l,l+a),16);a===1&&(u+=u<<4),o[l/a]=u}return o[3]=o[3]/255,o}p(i)}const t=yt();t.fillStyle="#abcdef";let e=t.fillStyle;t.fillStyle=i,t.fillStyle===e&&(t.fillStyle="#fedcba",e=t.fillStyle,t.fillStyle=i,t.fillStyle===e&&p(i));const s=t.fillStyle;if(s.startsWith("#")||s.startsWith("rgba"))return j(s);t.clearRect(0,0,1,1),t.fillRect(0,0,1,1);const n=Array.from(t.getImageData(0,0,1,1).data);return n[3]=vt(n[3]/255,3),n}function St(i){return typeof i=="string"?i:T(i)}const Ct=1024,y={};let R=0;function Ot(i){if(i==="none")return pt;if(y.hasOwnProperty(i))return y[i];if(R>=Ct){let e=0;for(const s in y)e++&3||(delete y[s],--R)}const t=j(i);t.length!==4&&p(i);for(const e of t)isNaN(e)&&p(i);return y[i]=t,++R,t}function k(i){return Array.isArray(i)?i:Ot(i)}function T(i){let t=i[0];t!=(t|0)&&(t=t+.5|0);let e=i[1];e!=(e|0)&&(e=e+.5|0);let s=i[2];s!=(s|0)&&(s=s+.5|0);const n=i[3]===void 0?1:Math.round(i[3]*1e3)/1e3;return"rgba("+t+","+e+","+s+","+n+")"}var L={CHANGE:"change"};let Et=class{constructor(){this.disposed=!1}dispose(){this.disposed||(this.disposed=!0,this.disposeInternal())}disposeInternal(){}};var At=Et;function q(){}function Z(i){for(const t in i)delete i[t]}function $t(i){let t;for(t in i)return!1;return!t}class Rt{constructor(t){this.propagationStopped,this.defaultPrevented,this.type=t,this.target=null}preventDefault(){this.defaultPrevented=!0}stopPropagation(){this.propagationStopped=!0}}var K=Rt;let kt=class extends At{constructor(t){super(),this.eventTarget_=t,this.pendingRemovals_=null,this.dispatching_=null,this.listeners_=null}addEventListener(t,e){if(!t||!e)return;const s=this.listeners_||(this.listeners_={}),n=s[t]||(s[t]=[]);n.includes(e)||n.push(e)}dispatchEvent(t){const e=typeof t=="string",s=e?t:t.type,n=this.listeners_&&this.listeners_[s];if(!n)return;const r=e?new K(t):t;r.target||(r.target=this.eventTarget_||this);const a=this.dispatching_||(this.dispatching_={}),o=this.pendingRemovals_||(this.pendingRemovals_={});s in a||(a[s]=0,o[s]=0),++a[s];let l;for(let c=0,u=n.length;c<u;++c)if("handleEvent"in n[c]?l=n[c].handleEvent(r):l=n[c].call(this,r),l===!1||r.propagationStopped){l=!1;break}if(--a[s]===0){let c=o[s];for(delete o[s];c--;)this.removeEventListener(s,q);delete a[s]}return l}disposeInternal(){this.listeners_&&Z(this.listeners_)}getListeners(t){return this.listeners_&&this.listeners_[t]||void 0}hasListener(t){return this.listeners_?t?t in this.listeners_:Object.keys(this.listeners_).length>0:!1}removeEventListener(t,e){if(!this.listeners_)return;const s=this.listeners_[t];if(!s)return;const n=s.indexOf(e);n!==-1&&(this.pendingRemovals_&&t in this.pendingRemovals_?(s[n]=q,++this.pendingRemovals_[t]):(s.splice(n,1),s.length===0&&delete this.listeners_[t]))}};var Y=kt;function z(i,t,e,s,n){if(n){const a=e;e=function(o){return i.removeEventListener(t,e),a.call(this,o)}}const r={target:i,type:t,listener:e};return i.addEventListener(t,e),r}function U(i,t,e,s){return z(i,t,e,s,!0)}function B(i){i&&i.target&&(i.target.removeEventListener(i.type,i.listener),Z(i))}function zt(i,t){return new Promise((e,s)=>{function n(){a(),e(i)}function r(){a(),s(new Error("Image load error"))}function a(){i.removeEventListener("load",n),i.removeEventListener("error",r)}i.addEventListener("load",n),i.addEventListener("error",r)})}function Pt(i,t){return t&&(i.src=t),i.src&&mt?new Promise((e,s)=>i.decode().then(()=>e(i)).catch(n=>i.complete&&i.width?e(i):s(n))):zt(i)}let xt=class{constructor(){this.cache_={},this.patternCache_={},this.cacheSize_=0,this.maxCacheSize_=1024}clear(){this.cache_={},this.patternCache_={},this.cacheSize_=0}canExpireCache(){return this.cacheSize_>this.maxCacheSize_}expire(){if(this.canExpireCache()){let t=0;for(const e in this.cache_){const s=this.cache_[e];!(t++&3)&&!s.hasListener()&&(delete this.cache_[e],delete this.patternCache_[e],--this.cacheSize_)}}}get(t,e,s){const n=P(t,e,s);return n in this.cache_?this.cache_[n]:null}getPattern(t,e,s){const n=P(t,e,s);return n in this.patternCache_?this.patternCache_[n]:null}set(t,e,s,n,r){const a=P(t,e,s),o=a in this.cache_;this.cache_[a]=n,r&&(n.getImageState()===h.IDLE&&n.load(),n.getImageState()===h.LOADING?n.ready().then(()=>{this.patternCache_[a]=J().createPattern(n.getImage(1),"repeat")}):this.patternCache_[a]=J().createPattern(n.getImage(1),"repeat")),o||++this.cacheSize_}setSize(t){this.maxCacheSize_=t,this.expire()}};function P(i,t,e){const s=e?k(e):"null";return t+":"+i+":"+s}const g=new xt;let D=null,Q=class extends Y{constructor(t,e,s,n,r){super(),this.hitDetectionImage_=null,this.image_=t,this.crossOrigin_=s,this.canvas_={},this.color_=r,this.imageState_=n===void 0?h.IDLE:n,this.size_=t&&t.width&&t.height?[t.width,t.height]:null,this.src_=e,this.tainted_,this.ready_=null}initializeImage_(){this.image_=new Image,this.crossOrigin_!==null&&(this.image_.crossOrigin=this.crossOrigin_)}isTainted_(){if(this.tainted_===void 0&&this.imageState_===h.LOADED){D||(D=_(1,1,void 0,{willReadFrequently:!0})),D.drawImage(this.image_,0,0);try{D.getImageData(0,0,1,1),this.tainted_=!1}catch{D=null,this.tainted_=!0}}return this.tainted_===!0}dispatchChangeEvent_(){this.dispatchEvent(L.CHANGE)}handleImageError_(){this.imageState_=h.ERROR,this.dispatchChangeEvent_()}handleImageLoad_(){this.imageState_=h.LOADED,this.size_=[this.image_.width,this.image_.height],this.dispatchChangeEvent_()}getImage(t){return this.image_||this.initializeImage_(),this.replaceColor_(t),this.canvas_[t]?this.canvas_[t]:this.image_}getPixelRatio(t){return this.replaceColor_(t),this.canvas_[t]?t:1}getImageState(){return this.imageState_}getHitDetectionImage(){if(this.image_||this.initializeImage_(),!this.hitDetectionImage_)if(this.isTainted_()){const t=this.size_[0],e=this.size_[1],s=_(t,e);s.fillRect(0,0,t,e),this.hitDetectionImage_=s.canvas}else this.hitDetectionImage_=this.image_;return this.hitDetectionImage_}getSize(){return this.size_}getSrc(){return this.src_}load(){if(this.imageState_===h.IDLE){this.image_||this.initializeImage_(),this.imageState_=h.LOADING;try{this.src_!==void 0&&(this.image_.src=this.src_)}catch{this.handleImageError_()}this.image_ instanceof HTMLImageElement&&Pt(this.image_,this.src_).then(t=>{this.image_=t,this.handleImageLoad_()}).catch(this.handleImageError_.bind(this))}}replaceColor_(t){if(!this.color_||this.canvas_[t]||this.imageState_!==h.LOADED)return;const e=this.image_,s=_(Math.ceil(e.width*t),Math.ceil(e.height*t)),n=s.canvas;s.scale(t,t),s.drawImage(e,0,0),s.globalCompositeOperation="multiply",s.fillStyle=St(this.color_),s.fillRect(0,0,n.width/t,n.height/t),s.globalCompositeOperation="destination-in",s.drawImage(e,0,0),this.canvas_[t]=n}ready(){return this.ready_||(this.ready_=new Promise(t=>{if(this.imageState_===h.LOADED||this.imageState_===h.ERROR)t();else{const e=()=>{(this.imageState_===h.LOADED||this.imageState_===h.ERROR)&&(this.removeEventListener(L.CHANGE,e),t())};this.addEventListener(L.CHANGE,e)}})),this.ready_}};function X(i,t,e,s,n,r){let a=t===void 0?void 0:g.get(t,e,n);return a||(a=new Q(i,i&&"src"in i?i.src||void 0:t,e,s,n),g.set(t,e,n,a,r)),r&&a&&!g.getPattern(t,e,n)&&g.set(t,e,n,a,r),a}var Mt=Q;function tt(i){return i?Array.isArray(i)?T(i):typeof i=="object"&&"src"in i?bt(i):i:null}function bt(i){if(!i.offset||!i.size)return g.getPattern(i.src,"anonymous",i.color);const t=i.src+":"+i.offset,e=g.getPattern(t,void 0,i.color);if(e)return e;const s=g.get(i.src,"anonymous",null);if(s.getImageState()!==h.LOADED)return null;const n=_(i.size[0],i.size[1]);return n.drawImage(s.getImage(1),i.offset[0],i.offset[1],i.size[0],i.size[1],0,0,i.size[0],i.size[1]),X(n.canvas,t,void 0,h.LOADED,i.color,!0),g.getPattern(t,void 0,i.color)}var Wt={PROPERTYCHANGE:"propertychange"};let Gt=class extends Y{constructor(){super(),this.on=this.onInternal,this.once=this.onceInternal,this.un=this.unInternal,this.revision_=0}changed(){++this.revision_,this.dispatchEvent(L.CHANGE)}getRevision(){return this.revision_}onInternal(t,e){if(Array.isArray(t)){const s=t.length,n=new Array(s);for(let r=0;r<s;++r)n[r]=z(this,t[r],e);return n}return z(this,t,e)}onceInternal(t,e){let s;if(Array.isArray(t)){const n=t.length;s=new Array(n);for(let r=0;r<n;++r)s[r]=U(this,t[r],e)}else s=U(this,t,e);return e.ol_key=s,s}unInternal(t,e){const s=e.ol_key;if(s)Nt(s);else if(Array.isArray(t))for(let n=0,r=t.length;n<r;++n)this.removeEventListener(t[n],e);else this.removeEventListener(t,e)}};function Nt(i){if(Array.isArray(i))for(let t=0,e=i.length;t<e;++t)B(i[t]);else B(i)}var Ft=Gt;function d(){throw new Error("Unimplemented abstract method.")}let Vt=0;function et(i){return i.ol_uid||(i.ol_uid=String(++Vt))}class it extends K{constructor(t,e,s){super(t),this.key=e,this.oldValue=s}}class Ht extends Ft{constructor(t){super(),this.on,this.once,this.un,et(this),this.values_=null,t!==void 0&&this.setProperties(t)}get(t){let e;return this.values_&&this.values_.hasOwnProperty(t)&&(e=this.values_[t]),e}getKeys(){return this.values_&&Object.keys(this.values_)||[]}getProperties(){return this.values_&&Object.assign({},this.values_)||{}}getPropertiesInternal(){return this.values_}hasProperties(){return!!this.values_}notify(t,e){let s;s=`change:${t}`,this.hasListener(s)&&this.dispatchEvent(new it(s,t,e)),s=Wt.PROPERTYCHANGE,this.hasListener(s)&&this.dispatchEvent(new it(s,t,e))}addChangeListener(t,e){this.addEventListener(`change:${t}`,e)}removeChangeListener(t,e){this.removeEventListener(`change:${t}`,e)}set(t,e,s){const n=this.values_||(this.values_={});if(s)n[t]=e;else{const r=n[t];n[t]=e,r!==e&&this.notify(t,r)}}setProperties(t,e){for(const s in t)this.set(s,t[s],e)}applyProperties(t){t.values_&&Object.assign(this.values_||(this.values_={}),t.values_)}unset(t,e){if(this.values_&&t in this.values_){const s=this.values_[t];delete this.values_[t],$t(this.values_)&&(this.values_=null),e||this.notify(t,s)}}}var Jt=Ht;const st="#000",nt="round",rt="round",jt=10,Tt="#000",qt=1;new Jt;function at(i,t){return Array.isArray(i)?i:(t===void 0?t=[i,i]:(t[0]=i,t[1]=i),t)}let Zt=class ht{constructor(t){this.opacity_=t.opacity,this.rotateWithView_=t.rotateWithView,this.rotation_=t.rotation,this.scale_=t.scale,this.scaleArray_=at(t.scale),this.displacement_=t.displacement,this.declutterMode_=t.declutterMode}clone(){const t=this.getScale();return new ht({opacity:this.getOpacity(),scale:Array.isArray(t)?t.slice():t,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()})}getOpacity(){return this.opacity_}getRotateWithView(){return this.rotateWithView_}getRotation(){return this.rotation_}getScale(){return this.scale_}getScaleArray(){return this.scaleArray_}getDisplacement(){return this.displacement_}getDeclutterMode(){return this.declutterMode_}getAnchor(){return d()}getImage(t){return d()}getHitDetectionImage(){return d()}getPixelRatio(t){return 1}getImageState(){return d()}getImageSize(){return d()}getOrigin(){return d()}getSize(){return d()}setDisplacement(t){this.displacement_=t}setOpacity(t){this.opacity_=t}setRotateWithView(t){this.rotateWithView_=t}setRotation(t){this.rotation_=t}setScale(t){this.scale_=t,this.scaleArray_=at(t)}listenImageChange(t){d()}load(){d()}unlistenImageChange(t){d()}ready(){return Promise.resolve()}};var Kt=Zt;let Yt=class ct extends Kt{constructor(t){super({opacity:1,rotateWithView:t.rotateWithView!==void 0?t.rotateWithView:!1,rotation:t.rotation!==void 0?t.rotation:0,scale:t.scale!==void 0?t.scale:1,displacement:t.displacement!==void 0?t.displacement:[0,0],declutterMode:t.declutterMode}),this.hitDetectionCanvas_=null,this.fill_=t.fill!==void 0?t.fill:null,this.origin_=[0,0],this.points_=t.points,this.radius=t.radius,this.radius2_=t.radius2,this.angle_=t.angle!==void 0?t.angle:0,this.stroke_=t.stroke!==void 0?t.stroke:null,this.size_,this.renderOptions_,this.imageState_=this.fill_&&this.fill_.loading()?h.LOADING:h.LOADED,this.imageState_===h.LOADING&&this.ready().then(()=>this.imageState_=h.LOADED),this.render()}clone(){const t=this.getScale(),e=new ct({fill:this.getFill()?this.getFill().clone():void 0,points:this.getPoints(),radius:this.getRadius(),radius2:this.getRadius2(),angle:this.getAngle(),stroke:this.getStroke()?this.getStroke().clone():void 0,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),scale:Array.isArray(t)?t.slice():t,displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()});return e.setOpacity(this.getOpacity()),e}getAnchor(){const t=this.size_,e=this.getDisplacement(),s=this.getScaleArray();return[t[0]/2-e[0]/s[0],t[1]/2+e[1]/s[1]]}getAngle(){return this.angle_}getFill(){return this.fill_}setFill(t){this.fill_=t,this.render()}getHitDetectionImage(){return this.hitDetectionCanvas_||(this.hitDetectionCanvas_=this.createHitDetectionCanvas_(this.renderOptions_)),this.hitDetectionCanvas_}getImage(t){const e=this.fill_?.getKey(),s=`${t},${this.angle_},${this.radius},${this.radius2_},${this.points_},${e}`+Object.values(this.renderOptions_).join(",");let n=g.get(s,null,null)?.getImage(1);if(!n){const r=this.renderOptions_,a=Math.ceil(r.size*t),o=_(a,a);this.draw_(r,o,t),n=o.canvas,g.set(s,null,null,new Mt(n,void 0,null,h.LOADED,null))}return n}getPixelRatio(t){return t}getImageSize(){return this.size_}getImageState(){return this.imageState_}getOrigin(){return this.origin_}getPoints(){return this.points_}getRadius(){return this.radius}getRadius2(){return this.radius2_}getSize(){return this.size_}getStroke(){return this.stroke_}setStroke(t){this.stroke_=t,this.render()}listenImageChange(t){}load(){}unlistenImageChange(t){}calculateLineJoinSize_(t,e,s){if(e===0||this.points_===1/0||t!=="bevel"&&t!=="miter")return e;let n=this.radius,r=this.radius2_===void 0?n:this.radius2_;if(n<r){const E=n;n=r,r=E}const a=this.radius2_===void 0?this.points_:this.points_*2,o=2*Math.PI/a,l=r*Math.sin(o),c=Math.sqrt(r*r-l*l),u=n-c,G=Math.sqrt(l*l+u*u),C=G/l;if(t==="miter"&&C<=s)return C*e;const N=e/2/C,F=e/2*(u/G),O=Math.sqrt((n+N)*(n+N)+F*F)-n;if(this.radius2_===void 0||t==="bevel")return O*2;const v=n*Math.sin(o),gt=Math.sqrt(n*n-v*v),V=r-gt,H=Math.sqrt(v*v+V*V)/v;if(H<=s){const E=H*e/2-r-n;return 2*Math.max(O,E)}return O*2}createRenderOptions(){let t=nt,e=rt,s=0,n=null,r=0,a,o=0;this.stroke_&&(a=tt(this.stroke_.getColor()??Tt),o=this.stroke_.getWidth()??qt,n=this.stroke_.getLineDash(),r=this.stroke_.getLineDashOffset()??0,e=this.stroke_.getLineJoin()??rt,t=this.stroke_.getLineCap()??nt,s=this.stroke_.getMiterLimit()??jt);const l=this.calculateLineJoinSize_(e,o,s),c=Math.max(this.radius,this.radius2_||0),u=Math.ceil(2*c+l);return{strokeStyle:a,strokeWidth:o,size:u,lineCap:t,lineDash:n,lineDashOffset:r,lineJoin:e,miterLimit:s}}render(){this.renderOptions_=this.createRenderOptions();const t=this.renderOptions_.size;this.hitDetectionCanvas_=null,this.size_=[t,t]}draw_(t,e,s){if(e.scale(s,s),e.translate(t.size/2,t.size/2),this.createPath_(e),this.fill_){let n=this.fill_.getColor();n===null&&(n=st),e.fillStyle=tt(n),e.fill()}t.strokeStyle&&(e.strokeStyle=t.strokeStyle,e.lineWidth=t.strokeWidth,t.lineDash&&(e.setLineDash(t.lineDash),e.lineDashOffset=t.lineDashOffset),e.lineCap=t.lineCap,e.lineJoin=t.lineJoin,e.miterLimit=t.miterLimit,e.stroke())}createHitDetectionCanvas_(t){let e;if(this.fill_){let s=this.fill_.getColor(),n=0;typeof s=="string"&&(s=k(s)),s===null?n=1:Array.isArray(s)&&(n=s.length===4?s[3]:1),n===0&&(e=_(t.size,t.size),this.drawHitDetectionCanvas_(t,e))}return e?e.canvas:this.getImage(1)}createPath_(t){let e=this.points_;const s=this.radius;if(e===1/0)t.arc(0,0,s,0,2*Math.PI);else{const n=this.radius2_===void 0?s:this.radius2_;this.radius2_!==void 0&&(e*=2);const r=this.angle_-Math.PI/2,a=2*Math.PI/e;for(let o=0;o<e;o++){const l=r+o*a,c=o%2===0?s:n;t.lineTo(c*Math.cos(l),c*Math.sin(l))}t.closePath()}}drawHitDetectionCanvas_(t,e){e.translate(t.size/2,t.size/2),this.createPath_(e),e.fillStyle=st,e.fill(),t.strokeStyle&&(e.strokeStyle=t.strokeStyle,e.lineWidth=t.strokeWidth,t.lineDash&&(e.setLineDash(t.lineDash),e.lineDashOffset=t.lineDashOffset),e.lineJoin=t.lineJoin,e.miterLimit=t.miterLimit,e.stroke())}ready(){return this.fill_?this.fill_.ready():Promise.resolve()}};var Ut=Yt;let Bt=class ut extends Ut{constructor(t){t=t||{radius:5},super({points:1/0,fill:t.fill,radius:t.radius,stroke:t.stroke,scale:t.scale!==void 0?t.scale:1,rotation:t.rotation!==void 0?t.rotation:0,rotateWithView:t.rotateWithView!==void 0?t.rotateWithView:!1,displacement:t.displacement!==void 0?t.displacement:[0,0],declutterMode:t.declutterMode})}clone(){const t=this.getScale(),e=new ut({fill:this.getFill()?this.getFill().clone():void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,radius:this.getRadius(),scale:Array.isArray(t)?t.slice():t,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()});return e.setOpacity(this.getOpacity()),e}setRadius(t){this.radius=t,this.render()}};var ot=Bt;class b{constructor(t){t=t||{},this.patternImage_=null,this.color_=null,t.color!==void 0&&this.setColor(t.color)}clone(){const t=this.getColor();return new b({color:Array.isArray(t)?t.slice():t||void 0})}getColor(){return this.color_}setColor(t){if(t!==null&&typeof t=="object"&&"src"in t){const e=X(null,t.src,"anonymous",void 0,t.offset?null:t.color?t.color:null,!(t.offset&&t.size));e.ready().then(()=>{this.patternImage_=null}),e.getImageState()===h.IDLE&&e.load(),e.getImageState()===h.LOADING&&(this.patternImage_=e)}this.color_=t}getKey(){const t=this.getColor();return t?t instanceof CanvasPattern||t instanceof CanvasGradient?et(t):typeof t=="object"&&"src"in t?t.src+":"+t.offset:k(t).toString():""}loading(){return!!this.patternImage_}ready(){return this.patternImage_?this.patternImage_.ready():Promise.resolve()}}var x=b;class W{constructor(t){t=t||{},this.color_=t.color!==void 0?t.color:null,this.lineCap_=t.lineCap,this.lineDash_=t.lineDash!==void 0?t.lineDash:null,this.lineDashOffset_=t.lineDashOffset,this.lineJoin_=t.lineJoin,this.miterLimit_=t.miterLimit,this.width_=t.width}clone(){const t=this.getColor();return new W({color:Array.isArray(t)?t.slice():t||void 0,lineCap:this.getLineCap(),lineDash:this.getLineDash()?this.getLineDash().slice():void 0,lineDashOffset:this.getLineDashOffset(),lineJoin:this.getLineJoin(),miterLimit:this.getMiterLimit(),width:this.getWidth()})}getColor(){return this.color_}getLineCap(){return this.lineCap_}getLineDash(){return this.lineDash_}getLineDashOffset(){return this.lineDashOffset_}getLineJoin(){return this.lineJoin_}getMiterLimit(){return this.miterLimit_}getWidth(){return this.width_}setColor(t){this.color_=t}setLineCap(t){this.lineCap_=t}setLineDash(t){this.lineDash_=t}setLineDashOffset(t){this.lineDashOffset_=t}setLineJoin(t){this.lineJoin_=t}setMiterLimit(t){this.miterLimit_=t}setWidth(t){this.width_=t}}var S=W;class f{constructor(t){t=t||{},this.geometry_=null,this.geometryFunction_=lt,t.geometry!==void 0&&this.setGeometry(t.geometry),this.fill_=t.fill!==void 0?t.fill:null,this.image_=t.image!==void 0?t.image:null,this.renderer_=t.renderer!==void 0?t.renderer:null,this.hitDetectionRenderer_=t.hitDetectionRenderer!==void 0?t.hitDetectionRenderer:null,this.stroke_=t.stroke!==void 0?t.stroke:null,this.text_=t.text!==void 0?t.text:null,this.zIndex_=t.zIndex}clone(){let t=this.getGeometry();return t&&typeof t=="object"&&(t=t.clone()),new f({geometry:t??void 0,fill:this.getFill()?this.getFill().clone():void 0,image:this.getImage()?this.getImage().clone():void 0,renderer:this.getRenderer()??void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,text:this.getText()?this.getText().clone():void 0,zIndex:this.getZIndex()})}getRenderer(){return this.renderer_}setRenderer(t){this.renderer_=t}setHitDetectionRenderer(t){this.hitDetectionRenderer_=t}getHitDetectionRenderer(){return this.hitDetectionRenderer_}getGeometry(){return this.geometry_}getGeometryFunction(){return this.geometryFunction_}getFill(){return this.fill_}setFill(t){this.fill_=t}getImage(){return this.image_}setImage(t){this.image_=t}getStroke(){return this.stroke_}setStroke(t){this.stroke_=t}getText(){return this.text_}setText(t){this.text_=t}getZIndex(){return this.zIndex_}setGeometry(t){typeof t=="function"?this.geometryFunction_=t:typeof t=="string"?this.geometryFunction_=function(e){return e.get(t)}:t?t!==void 0&&(this.geometryFunction_=function(){return t}):this.geometryFunction_=lt,this.geometry_=t}setZIndex(t){this.zIndex_=t}}function Qt(i){let t;if(typeof i=="function")t=i;else{let e;Array.isArray(i)?e=i:(dt(typeof i.getZIndex=="function","Expected an `Style` or an array of `Style`"),e=[i]),t=function(){return e}}return t}let M=null;function Xt(i,t){if(!M){const e=new x({color:"rgba(255,255,255,0.4)"}),s=new S({color:"#3399CC",width:1.25});M=[new f({image:new ot({fill:e,stroke:s,radius:5}),fill:e,stroke:s})]}return M}function te(){const i={},t=[255,255,255,1],e=[0,153,255,1],s=3;return i.Polygon=[new f({fill:new x({color:[255,255,255,.5]})})],i.MultiPolygon=i.Polygon,i.LineString=[new f({stroke:new S({color:t,width:s+2})}),new f({stroke:new S({color:e,width:s})})],i.MultiLineString=i.LineString,i.Circle=i.Polygon.concat(i.LineString),i.Point=[new f({image:new ot({radius:s*2,fill:new x({color:e}),stroke:new S({color:t,width:s/2})}),zIndex:1/0})],i.MultiPoint=i.Point,i.GeometryCollection=i.Polygon.concat(i.LineString,i.Point),i}function lt(i){return i.getGeometry()}var ee=f;export{Xt as createDefaultStyle,te as createEditingStyle,ee as default,Qt as toFunction};
