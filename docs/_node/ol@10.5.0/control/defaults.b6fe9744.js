var _={ADD:"add",REMOVE:"remove"},z={PROPERTYCHANGE:"propertychange"},p={CHANGE:"change",CLICK:"click"};let S=class{constructor(){this.disposed=!1}dispose(){this.disposed||(this.disposed=!0,this.disposeInternal())}disposeInternal(){}};var k=S;function D(i,t){const e=i.length;if(e!==t.length)return!1;for(let s=0;s<e;s++)if(i[s]!==t[s])return!1;return!0}function b(){}function H(i){function t(){let e;try{e=i()}catch(s){return Promise.reject(s)}return e instanceof Promise?e:Promise.resolve(e)}return t()}function N(i){for(const t in i)delete i[t]}function q(i){let t;for(t in i)return!1;return!t}class M{constructor(t){this.propagationStopped,this.defaultPrevented,this.type=t,this.target=null}preventDefault(){this.defaultPrevented=!0}stopPropagation(){this.propagationStopped=!0}}var y=M;let B=class extends k{constructor(t){super(),this.eventTarget_=t,this.pendingRemovals_=null,this.dispatching_=null,this.listeners_=null}addEventListener(t,e){if(!t||!e)return;const s=this.listeners_||(this.listeners_={}),n=s[t]||(s[t]=[]);n.includes(e)||n.push(e)}dispatchEvent(t){const e=typeof t=="string",s=e?t:t.type,n=this.listeners_&&this.listeners_[s];if(!n)return;const l=e?new y(t):t;l.target||(l.target=this.eventTarget_||this);const r=this.dispatching_||(this.dispatching_={}),a=this.pendingRemovals_||(this.pendingRemovals_={});s in r||(r[s]=0,a[s]=0),++r[s];let o;for(let u=0,h=n.length;u<h;++u)if("handleEvent"in n[u]?o=n[u].handleEvent(l):o=n[u].call(this,l),o===!1||l.propagationStopped){o=!1;break}if(--r[s]===0){let u=a[s];for(delete a[s];u--;)this.removeEventListener(s,b);delete r[s]}return o}disposeInternal(){this.listeners_&&N(this.listeners_)}getListeners(t){return this.listeners_&&this.listeners_[t]||void 0}hasListener(t){return this.listeners_?t?t in this.listeners_:Object.keys(this.listeners_).length>0:!1}removeEventListener(t,e){if(!this.listeners_)return;const s=this.listeners_[t];if(!s)return;const n=s.indexOf(e);n!==-1&&(this.pendingRemovals_&&t in this.pendingRemovals_?(s[n]=b,++this.pendingRemovals_[t]):(s.splice(n,1),s.length===0&&delete this.listeners_[t]))}};var K=B;function g(i,t,e,s,n){if(n){const r=e;e=function(a){return i.removeEventListener(t,e),r.call(s??this,a)}}else s&&s!==i&&(e=e.bind(s));const l={target:i,type:t,listener:e};return i.addEventListener(t,e),l}function w(i,t,e,s){return g(i,t,e,s,!0)}function E(i){i&&i.target&&(i.target.removeEventListener(i.type,i.listener),N(i))}class V extends K{constructor(){super(),this.on=this.onInternal,this.once=this.onceInternal,this.un=this.unInternal,this.revision_=0}changed(){++this.revision_,this.dispatchEvent(p.CHANGE)}getRevision(){return this.revision_}onInternal(t,e){if(Array.isArray(t)){const s=t.length,n=new Array(s);for(let l=0;l<s;++l)n[l]=g(this,t[l],e);return n}return g(this,t,e)}onceInternal(t,e){let s;if(Array.isArray(t)){const n=t.length;s=new Array(n);for(let l=0;l<n;++l)s[l]=w(this,t[l],e)}else s=w(this,t,e);return e.ol_key=s,s}unInternal(t,e){const s=e.ol_key;if(s)G(s);else if(Array.isArray(t))for(let n=0,l=t.length;n<l;++n)this.removeEventListener(t[n],e);else this.removeEventListener(t,e)}}function G(i){if(Array.isArray(i))for(let t=0,e=i.length;t<e;++t)E(i[t]);else E(i)}var j=V;let U=0;function Z(i){return i.ol_uid||(i.ol_uid=String(++U))}let $=class extends y{constructor(t,e,s){super(t),this.key=e,this.oldValue=s}},W=class extends j{constructor(t){super(),this.on,this.once,this.un,Z(this),this.values_=null,t!==void 0&&this.setProperties(t)}get(t){let e;return this.values_&&this.values_.hasOwnProperty(t)&&(e=this.values_[t]),e}getKeys(){return this.values_&&Object.keys(this.values_)||[]}getProperties(){return this.values_&&Object.assign({},this.values_)||{}}getPropertiesInternal(){return this.values_}hasProperties(){return!!this.values_}notify(t,e){let s;s=`change:${t}`,this.hasListener(s)&&this.dispatchEvent(new $(s,t,e)),s=z.PROPERTYCHANGE,this.hasListener(s)&&this.dispatchEvent(new $(s,t,e))}addChangeListener(t,e){this.addEventListener(`change:${t}`,e)}removeChangeListener(t,e){this.removeEventListener(`change:${t}`,e)}set(t,e,s){const n=this.values_||(this.values_={});if(s)n[t]=e;else{const l=n[t];n[t]=e,l!==e&&this.notify(t,l)}}setProperties(t,e){for(const s in t)this.set(s,t[s],e)}applyProperties(t){t.values_&&Object.assign(this.values_||(this.values_={}),t.values_)}unset(t,e){if(this.values_&&t in this.values_){const s=this.values_[t];delete this.values_[t],q(this.values_)&&(this.values_=null),e||this.notify(t,s)}}};var x=W;const I={LENGTH:"length"};let m=class extends y{constructor(t,e,s){super(t),this.element=e,this.index=s}};class Y extends x{constructor(t,e){if(super(),this.on,this.once,this.un,e=e||{},this.unique_=!!e.unique,this.array_=t||[],this.unique_)for(let s=0,n=this.array_.length;s<n;++s)this.assertUnique_(this.array_[s],s);this.updateLength_()}clear(){for(;this.getLength()>0;)this.pop()}extend(t){for(let e=0,s=t.length;e<s;++e)this.push(t[e]);return this}forEach(t){const e=this.array_;for(let s=0,n=e.length;s<n;++s)t(e[s],s,e)}getArray(){return this.array_}item(t){return this.array_[t]}getLength(){return this.get(I.LENGTH)}insertAt(t,e){if(t<0||t>this.getLength())throw new Error("Index out of bounds: "+t);this.unique_&&this.assertUnique_(e),this.array_.splice(t,0,e),this.updateLength_(),this.dispatchEvent(new m(_.ADD,e,t))}pop(){return this.removeAt(this.getLength()-1)}push(t){this.unique_&&this.assertUnique_(t);const e=this.getLength();return this.insertAt(e,t),this.getLength()}remove(t){const e=this.array_;for(let s=0,n=e.length;s<n;++s)if(e[s]===t)return this.removeAt(s)}removeAt(t){if(t<0||t>=this.getLength())return;const e=this.array_[t];return this.array_.splice(t,1),this.updateLength_(),this.dispatchEvent(new m(_.REMOVE,e,t)),e}setAt(t,e){const s=this.getLength();if(t>=s){this.insertAt(t,e);return}if(t<0)throw new Error("Index out of bounds: "+t);this.unique_&&this.assertUnique_(e,t);const n=this.array_[t];this.array_[t]=e,this.dispatchEvent(new m(_.REMOVE,n,t)),this.dispatchEvent(new m(_.ADD,e,t))}updateLength_(){this.set(I.LENGTH,this.array_.length)}assertUnique_(t,e){for(let s=0,n=this.array_.length;s<n;++s)if(this.array_[s]===t&&s!==e)throw new Error("Duplicate item added to a unique collection")}}var F=Y;const v="ol-hidden",L="ol-unselectable",C="ol-control",O="ol-collapsed",d=typeof navigator<"u"&&typeof navigator.userAgent<"u"?navigator.userAgent.toLowerCase():"",J=d.includes("safari")&&!d.includes("chrom");J&&(d.includes("version/15.4")||/cpu (os|iphone os) 15_4 like mac os x/.test(d)),d.includes("webkit")&&d.includes("edge"),d.includes("macintosh"),typeof WorkerGlobalScope<"u"&&typeof OffscreenCanvas<"u"&&self instanceof WorkerGlobalScope,function(){let i=!1;try{const t=Object.defineProperty({},"passive",{get:function(){i=!0}});window.addEventListener("_",null,t),window.removeEventListener("_",null,t)}catch{}return i}();function R(i,t){const e=t.parentNode;e&&e.replaceChild(i,t)}function Q(i){for(;i.lastChild;)i.lastChild.remove()}var X={POSTRENDER:"postrender"};class tt extends x{constructor(t){super();const e=t.element;e&&!t.target&&!e.style.pointerEvents&&(e.style.pointerEvents="auto"),this.element=e||null,this.target_=null,this.map_=null,this.listenerKeys=[],t.render&&(this.render=t.render),t.target&&this.setTarget(t.target)}disposeInternal(){this.element?.remove(),super.disposeInternal()}getMap(){return this.map_}setMap(t){this.map_&&this.element?.remove();for(let e=0,s=this.listenerKeys.length;e<s;++e)E(this.listenerKeys[e]);if(this.listenerKeys.length=0,this.map_=t,t){const e=this.target_??t.getOverlayContainerStopEvent();this.element&&e.appendChild(this.element),this.render!==b&&this.listenerKeys.push(g(t,X.POSTRENDER,this.render,this)),t.render()}}render(t){}setTarget(t){this.target_=typeof t=="string"?document.getElementById(t):t}}var A=tt;let et=class extends A{constructor(t){t=t||{},super({element:document.createElement("div"),render:t.render,target:t.target}),this.ulElement_=document.createElement("ul"),this.collapsed_=t.collapsed!==void 0?t.collapsed:!0,this.userCollapsed_=this.collapsed_,this.overrideCollapsible_=t.collapsible!==void 0,this.collapsible_=t.collapsible!==void 0?t.collapsible:!0,this.collapsible_||(this.collapsed_=!1),this.attributions_=t.attributions;const e=t.className!==void 0?t.className:"ol-attribution",s=t.tipLabel!==void 0?t.tipLabel:"Attributions",n=t.expandClassName!==void 0?t.expandClassName:e+"-expand",l=t.collapseLabel!==void 0?t.collapseLabel:"\u203A",r=t.collapseClassName!==void 0?t.collapseClassName:e+"-collapse";typeof l=="string"?(this.collapseLabel_=document.createElement("span"),this.collapseLabel_.textContent=l,this.collapseLabel_.className=r):this.collapseLabel_=l;const a=t.label!==void 0?t.label:"i";typeof a=="string"?(this.label_=document.createElement("span"),this.label_.textContent=a,this.label_.className=n):this.label_=a;const o=this.collapsible_&&!this.collapsed_?this.collapseLabel_:this.label_;this.toggleButton_=document.createElement("button"),this.toggleButton_.setAttribute("type","button"),this.toggleButton_.setAttribute("aria-expanded",String(!this.collapsed_)),this.toggleButton_.title=s,this.toggleButton_.appendChild(o),this.toggleButton_.addEventListener(p.CLICK,this.handleClick_.bind(this),!1);const u=e+" "+L+" "+C+(this.collapsed_&&this.collapsible_?" "+O:"")+(this.collapsible_?"":" ol-uncollapsible"),h=this.element;h.className=u,h.appendChild(this.toggleButton_),h.appendChild(this.ulElement_),this.renderedAttributions_=[],this.renderedVisible_=!0}collectSourceAttributions_(t){const e=this.getMap().getAllLayers(),s=new Set(e.flatMap(n=>n.getAttributions(t)));if(this.attributions_!==void 0&&(Array.isArray(this.attributions_)?this.attributions_.forEach(n=>s.add(n)):s.add(this.attributions_)),!this.overrideCollapsible_){const n=!e.some(l=>l.getSource()?.getAttributionsCollapsible()===!1);this.setCollapsible(n)}return Array.from(s)}async updateElement_(t){if(!t){this.renderedVisible_&&(this.element.style.display="none",this.renderedVisible_=!1);return}const e=await Promise.all(this.collectSourceAttributions_(t).map(n=>H(()=>n))),s=e.length>0;if(this.renderedVisible_!=s&&(this.element.style.display=s?"":"none",this.renderedVisible_=s),!D(e,this.renderedAttributions_)){Q(this.ulElement_);for(let n=0,l=e.length;n<l;++n){const r=document.createElement("li");r.innerHTML=e[n],this.ulElement_.appendChild(r)}this.renderedAttributions_=e}}handleClick_(t){t.preventDefault(),this.handleToggle_(),this.userCollapsed_=this.collapsed_}handleToggle_(){this.element.classList.toggle(O),this.collapsed_?R(this.collapseLabel_,this.label_):R(this.label_,this.collapseLabel_),this.collapsed_=!this.collapsed_,this.toggleButton_.setAttribute("aria-expanded",String(!this.collapsed_))}getCollapsible(){return this.collapsible_}setCollapsible(t){this.collapsible_!==t&&(this.collapsible_=t,this.element.classList.toggle("ol-uncollapsible"),this.userCollapsed_&&this.handleToggle_())}setCollapsed(t){this.userCollapsed_=t,!(!this.collapsible_||this.collapsed_===t)&&this.handleToggle_()}getCollapsed(){return this.collapsed_}render(t){this.updateElement_(t.frameState)}};var st=et;function it(i){return Math.pow(i,3)}function T(i){return 1-it(1-i)}class nt extends A{constructor(t){t=t||{},super({element:document.createElement("div"),render:t.render,target:t.target});const e=t.className!==void 0?t.className:"ol-rotate",s=t.label!==void 0?t.label:"\u21E7",n=t.compassClassName!==void 0?t.compassClassName:"ol-compass";this.label_=null,typeof s=="string"?(this.label_=document.createElement("span"),this.label_.className=n,this.label_.textContent=s):(this.label_=s,this.label_.classList.add(n));const l=t.tipLabel?t.tipLabel:"Reset rotation",r=document.createElement("button");r.className=e+"-reset",r.setAttribute("type","button"),r.title=l,r.appendChild(this.label_),r.addEventListener(p.CLICK,this.handleClick_.bind(this),!1);const a=e+" "+L+" "+C,o=this.element;o.className=a,o.appendChild(r),this.callResetNorth_=t.resetNorth?t.resetNorth:void 0,this.duration_=t.duration!==void 0?t.duration:250,this.autoHide_=t.autoHide!==void 0?t.autoHide:!0,this.rotation_=void 0,this.autoHide_&&this.element.classList.add(v)}handleClick_(t){t.preventDefault(),this.callResetNorth_!==void 0?this.callResetNorth_():this.resetNorth_()}resetNorth_(){const t=this.getMap().getView();if(!t)return;const e=t.getRotation();e!==void 0&&(this.duration_>0&&e%(2*Math.PI)!==0?t.animate({rotation:0,duration:this.duration_,easing:T}):t.setRotation(0))}render(t){const e=t.frameState;if(!e)return;const s=e.viewState.rotation;if(s!=this.rotation_){const n="rotate("+s+"rad)";if(this.autoHide_){const l=this.element.classList.contains(v);!l&&s===0?this.element.classList.add(v):l&&s!==0&&this.element.classList.remove(v)}this.label_.style.transform=n}this.rotation_=s}}var lt=nt;class rt extends A{constructor(t){t=t||{},super({element:document.createElement("div"),target:t.target});const e=t.className!==void 0?t.className:"ol-zoom",s=t.delta!==void 0?t.delta:1,n=t.zoomInClassName!==void 0?t.zoomInClassName:e+"-in",l=t.zoomOutClassName!==void 0?t.zoomOutClassName:e+"-out",r=t.zoomInLabel!==void 0?t.zoomInLabel:"+",a=t.zoomOutLabel!==void 0?t.zoomOutLabel:"\u2013",o=t.zoomInTipLabel!==void 0?t.zoomInTipLabel:"Zoom in",u=t.zoomOutTipLabel!==void 0?t.zoomOutTipLabel:"Zoom out",h=document.createElement("button");h.className=n,h.setAttribute("type","button"),h.title=o,h.appendChild(typeof r=="string"?document.createTextNode(r):r),h.addEventListener(p.CLICK,this.handleClick_.bind(this,s),!1);const c=document.createElement("button");c.className=l,c.setAttribute("type","button"),c.title=u,c.appendChild(typeof a=="string"?document.createTextNode(a):a),c.addEventListener(p.CLICK,this.handleClick_.bind(this,-s),!1);const P=e+" "+L+" "+C,f=this.element;f.className=P,f.appendChild(h),f.appendChild(c),this.duration_=t.duration!==void 0?t.duration:250}handleClick_(t,e){e.preventDefault(),this.zoomByDelta_(t)}zoomByDelta_(t){const e=this.getMap().getView();if(!e)return;const s=e.getZoom();if(s!==void 0){const n=e.getConstrainedZoom(s+t);this.duration_>0?(e.getAnimating()&&e.cancelAnimations(),e.animate({zoom:n,duration:this.duration_,easing:T})):e.setZoom(n)}}}var at=rt;function ot(i){i=i||{};const t=new F;return(i.zoom===void 0||i.zoom)&&t.push(new at(i.zoomOptions)),(i.rotate===void 0||i.rotate)&&t.push(new lt(i.rotateOptions)),(i.attribution===void 0||i.attribution)&&t.push(new st(i.attributionOptions)),t}export{ot as defaults};
