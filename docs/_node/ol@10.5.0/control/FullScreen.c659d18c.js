var v={TARGET:"target"};const T="ol-unselectable",g="ol-unsupported",w="ol-control",h=typeof navigator<"u"&&typeof navigator.userAgent<"u"?navigator.userAgent.toLowerCase():"",I=h.includes("safari")&&!h.includes("chrom");I&&(h.includes("version/15.4")||/cpu (os|iphone os) 15_4 like mac os x/.test(h)),h.includes("webkit")&&h.includes("edge"),h.includes("macintosh"),typeof WorkerGlobalScope<"u"&&typeof OffscreenCanvas<"u"&&self instanceof WorkerGlobalScope,function(){let n=!1;try{const e=Object.defineProperty({},"passive",{get:function(){n=!0}});window.addEventListener("_",null,e),window.removeEventListener("_",null,e)}catch{}return n}();function f(n,e){const t=e.parentNode;t&&t.replaceChild(n,e)}var m={CHANGE:"change",CLICK:"click"};function E(n){for(const e in n)delete n[e]}function S(n){let e;for(e in n)return!1;return!e}function u(n,e,t,s,i){if(i){const l=t;t=function(o){return n.removeEventListener(e,t),l.call(s??this,o)}}else s&&s!==n&&(t=t.bind(s));const r={target:n,type:e,listener:t};return n.addEventListener(e,t),r}function y(n,e,t,s){return u(n,e,t,s,!0)}function d(n){n&&n.target&&(n.target.removeEventListener(n.type,n.listener),E(n))}var $={POSTRENDER:"postrender"},x={PROPERTYCHANGE:"propertychange"};let P=class{constructor(){this.disposed=!1}dispose(){this.disposed||(this.disposed=!0,this.disposeInternal())}disposeInternal(){}};var O=P;function _(){}class M{constructor(e){this.propagationStopped,this.defaultPrevented,this.type=e,this.target=null}preventDefault(){this.defaultPrevented=!0}stopPropagation(){this.propagationStopped=!0}}var b=M;let G=class extends O{constructor(e){super(),this.eventTarget_=e,this.pendingRemovals_=null,this.dispatching_=null,this.listeners_=null}addEventListener(e,t){if(!e||!t)return;const s=this.listeners_||(this.listeners_={}),i=s[e]||(s[e]=[]);i.includes(t)||i.push(t)}dispatchEvent(e){const t=typeof e=="string",s=t?e:e.type,i=this.listeners_&&this.listeners_[s];if(!i)return;const r=t?new b(e):e;r.target||(r.target=this.eventTarget_||this);const l=this.dispatching_||(this.dispatching_={}),o=this.pendingRemovals_||(this.pendingRemovals_={});s in l||(l[s]=0,o[s]=0),++l[s];let c;for(let a=0,k=i.length;a<k;++a)if("handleEvent"in i[a]?c=i[a].handleEvent(r):c=i[a].call(this,r),c===!1||r.propagationStopped){c=!1;break}if(--l[s]===0){let a=o[s];for(delete o[s];a--;)this.removeEventListener(s,_);delete l[s]}return c}disposeInternal(){this.listeners_&&E(this.listeners_)}getListeners(e){return this.listeners_&&this.listeners_[e]||void 0}hasListener(e){return this.listeners_?e?e in this.listeners_:Object.keys(this.listeners_).length>0:!1}removeEventListener(e,t){if(!this.listeners_)return;const s=this.listeners_[e];if(!s)return;const i=s.indexOf(t);i!==-1&&(this.pendingRemovals_&&e in this.pendingRemovals_?(s[i]=_,++this.pendingRemovals_[e]):(s.splice(i,1),s.length===0&&delete this.listeners_[e]))}};var q=G;class p extends q{constructor(){super(),this.on=this.onInternal,this.once=this.onceInternal,this.un=this.unInternal,this.revision_=0}changed(){++this.revision_,this.dispatchEvent(m.CHANGE)}getRevision(){return this.revision_}onInternal(e,t){if(Array.isArray(e)){const s=e.length,i=new Array(s);for(let r=0;r<s;++r)i[r]=u(this,e[r],t);return i}return u(this,e,t)}onceInternal(e,t){let s;if(Array.isArray(e)){const i=e.length;s=new Array(i);for(let r=0;r<i;++r)s[r]=y(this,e[r],t)}else s=y(this,e,t);return t.ol_key=s,s}unInternal(e,t){const s=t.ol_key;if(s)D(s);else if(Array.isArray(e))for(let i=0,r=e.length;i<r;++i)this.removeEventListener(e[i],t);else this.removeEventListener(e,t)}}p.prototype.on,p.prototype.once,p.prototype.un;function D(n){if(Array.isArray(n))for(let e=0,t=n.length;e<t;++e)d(n[e]);else d(n)}var K=p;let H=0;function j(n){return n.ol_uid||(n.ol_uid=String(++H))}class C extends b{constructor(e,t,s){super(e),this.key=t,this.oldValue=s}}class U extends K{constructor(e){super(),this.on,this.once,this.un,j(this),this.values_=null,e!==void 0&&this.setProperties(e)}get(e){let t;return this.values_&&this.values_.hasOwnProperty(e)&&(t=this.values_[e]),t}getKeys(){return this.values_&&Object.keys(this.values_)||[]}getProperties(){return this.values_&&Object.assign({},this.values_)||{}}getPropertiesInternal(){return this.values_}hasProperties(){return!!this.values_}notify(e,t){let s;s=`change:${e}`,this.hasListener(s)&&this.dispatchEvent(new C(s,e,t)),s=x.PROPERTYCHANGE,this.hasListener(s)&&this.dispatchEvent(new C(s,e,t))}addChangeListener(e,t){this.addEventListener(`change:${e}`,t)}removeChangeListener(e,t){this.removeEventListener(`change:${e}`,t)}set(e,t,s){const i=this.values_||(this.values_={});if(s)i[e]=t;else{const r=i[e];i[e]=t,r!==t&&this.notify(e,r)}}setProperties(e,t){for(const s in e)this.set(s,e[s],t)}applyProperties(e){e.values_&&Object.assign(this.values_||(this.values_={}),e.values_)}unset(e,t){if(this.values_&&e in this.values_){const s=this.values_[e];delete this.values_[e],S(this.values_)&&(this.values_=null),t||this.notify(e,s)}}}var V=U;class B extends V{constructor(e){super();const t=e.element;t&&!e.target&&!t.style.pointerEvents&&(t.style.pointerEvents="auto"),this.element=t||null,this.target_=null,this.map_=null,this.listenerKeys=[],e.render&&(this.render=e.render),e.target&&this.setTarget(e.target)}disposeInternal(){this.element?.remove(),super.disposeInternal()}getMap(){return this.map_}setMap(e){this.map_&&this.element?.remove();for(let t=0,s=this.listenerKeys.length;t<s;++t)d(this.listenerKeys[t]);if(this.listenerKeys.length=0,this.map_=e,e){const t=this.target_??e.getOverlayContainerStopEvent();this.element&&t.appendChild(this.element),this.render!==_&&this.listenerKeys.push(u(e,$.POSTRENDER,this.render,this)),e.render()}}render(e){}setTarget(e){this.target_=typeof e=="string"?document.getElementById(e):e}}var W=B;const L=["fullscreenchange","webkitfullscreenchange"],N={ENTERFULLSCREEN:"enterfullscreen",LEAVEFULLSCREEN:"leavefullscreen"};class Y extends W{constructor(e){e=e||{},super({element:document.createElement("div"),target:e.target}),this.on,this.once,this.un,this.keys_=e.keys!==void 0?e.keys:!1,this.source_=e.source,this.isInFullscreen_=!1,this.boundHandleMapTargetChange_=this.handleMapTargetChange_.bind(this),this.cssClassName_=e.className!==void 0?e.className:"ol-full-screen",this.documentListeners_=[],this.activeClassName_=e.activeClassName!==void 0?e.activeClassName.split(" "):[this.cssClassName_+"-true"],this.inactiveClassName_=e.inactiveClassName!==void 0?e.inactiveClassName.split(" "):[this.cssClassName_+"-false"];const t=e.label!==void 0?e.label:"\u2922";this.labelNode_=typeof t=="string"?document.createTextNode(t):t;const s=e.labelActive!==void 0?e.labelActive:"\xD7";this.labelActiveNode_=typeof s=="string"?document.createTextNode(s):s;const i=e.tipLabel?e.tipLabel:"Toggle full-screen";this.button_=document.createElement("button"),this.button_.title=i,this.button_.setAttribute("type","button"),this.button_.appendChild(this.labelNode_),this.button_.addEventListener(m.CLICK,this.handleClick_.bind(this),!1),this.setClassName_(this.button_,this.isInFullscreen_),this.element.className=`${this.cssClassName_} ${T} ${w}`,this.element.appendChild(this.button_)}handleClick_(e){e.preventDefault(),this.handleFullScreen_()}handleFullScreen_(){const e=this.getMap();if(!e)return;const t=e.getOwnerDocument();if(F(t))if(R(t))J(t);else{let s;this.source_?s=typeof this.source_=="string"?t.getElementById(this.source_):this.source_:s=e.getTargetElement(),this.keys_?z(s):A(s)}}handleFullScreenChange_(){const e=this.getMap();if(!e)return;const t=this.isInFullscreen_;this.isInFullscreen_=R(e.getOwnerDocument()),t!==this.isInFullscreen_&&(this.setClassName_(this.button_,this.isInFullscreen_),this.isInFullscreen_?(f(this.labelActiveNode_,this.labelNode_),this.dispatchEvent(N.ENTERFULLSCREEN)):(f(this.labelNode_,this.labelActiveNode_),this.dispatchEvent(N.LEAVEFULLSCREEN)),e.updateSize())}setClassName_(e,t){t?(e.classList.remove(...this.inactiveClassName_),e.classList.add(...this.activeClassName_)):(e.classList.remove(...this.activeClassName_),e.classList.add(...this.inactiveClassName_))}setMap(e){const t=this.getMap();t&&t.removeChangeListener(v.TARGET,this.boundHandleMapTargetChange_),super.setMap(e),this.handleMapTargetChange_(),e&&e.addChangeListener(v.TARGET,this.boundHandleMapTargetChange_)}handleMapTargetChange_(){const e=this.documentListeners_;for(let s=0,i=e.length;s<i;++s)d(e[s]);e.length=0;const t=this.getMap();if(t){const s=t.getOwnerDocument();F(s)?this.element.classList.remove(g):this.element.classList.add(g);for(let i=0,r=L.length;i<r;++i)e.push(u(s,L[i],this.handleFullScreenChange_,this));this.handleFullScreenChange_()}}}function F(n){const e=n.body;return!!(e.webkitRequestFullscreen||e.requestFullscreen&&n.fullscreenEnabled)}function R(n){return!!(n.webkitIsFullScreen||n.fullscreenElement)}function A(n){n.requestFullscreen?n.requestFullscreen():n.webkitRequestFullscreen&&n.webkitRequestFullscreen()}function z(n){n.webkitRequestFullscreen?n.webkitRequestFullscreen():A(n)}function J(n){n.exitFullscreen?n.exitFullscreen():n.webkitExitFullscreen&&n.webkitExitFullscreen()}var Q=Y;export{Q as default};
